(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0]);}
installedChunks[chunkId]=0;}
for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId];}}
if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()();}};var installedModules={};var installedChunks={85:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+""+({}[chunkId]||chunkId)+"-"+{"72":"3c83487b6a80e653c5af","82":"977ebadee38857ac330c","89":"d836a380a577b4a5a1cf","95":"9c7db480d77ec6f3f509","99":"94dc65838158aaa9fc32"}[chunkId]+".js"}
function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2]);}else{var promise=new Promise(function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject];});promises.push(installedChunkData[2]=promise);var script=document.createElement('script');var onScriptComplete;script.charset='utf-8';script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc);}
script.src=jsonpScriptSrc(chunkId);var error=new Error();onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==='load'?'missing':event.type);var realSrc=event&&event.target&&event.target.src;error.message='Loading chunk '+chunkId+' failed.\n('+errorType+': '+realSrc+')';error.name='ChunkLoadError';error.type=errorType;error.request=realSrc;chunk[1](error);}
installedChunks[chunkId]=undefined;}};var timeout=setTimeout(function(){onScriptComplete({type:'timeout',target:script});},120000);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script);}}
return Promise.all(promises);};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter});}};__webpack_require__.r=function(exports){if(typeof Symbol!=='undefined'&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});}
Object.defineProperty(exports,'__esModule',{value:true});};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if((mode&4)&&typeof value==='object'&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,'default',{enumerable:true,value:value});if(mode&2&&typeof value!='string')for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key];}.bind(null,key));return ns;};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="/assets/packs/";__webpack_require__.oe=function(err){console.error(err);throw err;};var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=1142);})
({1065:(function(module,exports,__webpack_require__){__webpack_require__(1066);__webpack_require__(1067);__webpack_require__(1068);$(function(){if(typeof onAppModelViewDefined!='undefined')onAppModelViewDefined();});}),1066:(function(module,exports){(function(e){"use strict";e.fn.konami=function(t){var n,r,i,s;n=e.extend({},e.fn.konami.defaults,t);return this.each(function(){i=[];e(window).keyup(function(e){s=e.keyCode||e.which;if(n.code.length>i.push(s)){return;}if(n.code.length<i.length){i.shift();}if(n.code.toString()!==i.toString()){return;}n.cheat();});});};e.fn.konami.defaults={code:[38,38,40,40,37,39,37,39,66,65],cheat:null};})(jQuery);}),1067:(function(module,exports){(function(window,document,location,setTimeout,decodeURIComponent,encodeURIComponent){var global=this;var channelId=Math.floor(Math.random()*10000);var emptyFn=Function.prototype;var reURI=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;var reParent=/[\-\w]+\/\.\.\//;var reDoubleSlash=/([^:])\/\//g;var namespace="";var easyXDM={};var _easyXDM=window.easyXDM;var IFRAME_PREFIX="easyXDM_";var HAS_NAME_PROPERTY_BUG;var useHash=false;var flashVersion;var HAS_FLASH_THROTTLED_BUG;function isHostMethod(object,property){var t=typeof object[property];return t=='function'||(!!(t=='object'&&object[property]))||t=='unknown';}
function isHostObject(object,property){return!!(typeof(object[property])=='object'&&object[property]);}
function isArray(o){return Object.prototype.toString.call(o)==='[object Array]';}
function hasFlash(){var name="Shockwave Flash",mimeType="application/x-shockwave-flash";if(!undef(navigator.plugins)&&typeof navigator.plugins[name]=="object"){var description=navigator.plugins[name].description;if(description&&!undef(navigator.mimeTypes)&&navigator.mimeTypes[mimeType]&&navigator.mimeTypes[mimeType].enabledPlugin){flashVersion=description.match(/\d+/g);}}
if(!flashVersion){var flash;try{flash=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");flashVersion=Array.prototype.slice.call(flash.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1);flash=null;}
catch(notSupportedException){}}
if(!flashVersion){return false;}
var major=parseInt(flashVersion[0],10),minor=parseInt(flashVersion[1],10);HAS_FLASH_THROTTLED_BUG=major>9&&minor>0;return true;}
var on,un;if(isHostMethod(window,"addEventListener")){on=function(target,type,listener){target.addEventListener(type,listener,false);};un=function(target,type,listener){target.removeEventListener(type,listener,false);};}
else if(isHostMethod(window,"attachEvent")){on=function(object,sEvent,fpNotify){object.attachEvent("on"+sEvent,fpNotify);};un=function(object,sEvent,fpNotify){object.detachEvent("on"+sEvent,fpNotify);};}
else{throw new Error("Browser not supported");}
var domIsReady=false,domReadyQueue=[],readyState;if("readyState"in document){readyState=document.readyState;domIsReady=readyState=="complete"||(~navigator.userAgent.indexOf('AppleWebKit/')&&(readyState=="loaded"||readyState=="interactive"));}
else{domIsReady=!!document.body;}
function dom_onReady(){if(domIsReady){return;}
domIsReady=true;for(var i=0;i<domReadyQueue.length;i++){domReadyQueue[i]();}
domReadyQueue.length=0;}
if(!domIsReady){if(isHostMethod(window,"addEventListener")){on(document,"DOMContentLoaded",dom_onReady);}
else{on(document,"readystatechange",function(){if(document.readyState=="complete"){dom_onReady();}});if(document.documentElement.doScroll&&window===top){var doScrollCheck=function(){if(domIsReady){return;}
try{document.documentElement.doScroll("left");}
catch(e){setTimeout(doScrollCheck,1);return;}
dom_onReady();};doScrollCheck();}}
on(window,"load",dom_onReady);}
function whenReady(fn,scope){if(domIsReady){fn.call(scope);return;}
domReadyQueue.push(function(){fn.call(scope);});}
function getParentObject(){var obj=parent;if(namespace!==""){for(var i=0,ii=namespace.split(".");i<ii.length;i++){obj=obj[ii[i]];}}
return obj.easyXDM;}
function noConflict(ns){window.easyXDM=_easyXDM;namespace=ns;if(namespace){IFRAME_PREFIX="easyXDM_"+namespace.replace(".","_")+"_";}
return easyXDM;}
function getDomainName(url){return url.match(reURI)[3];}
function getPort(url){return url.match(reURI)[4]||"";}
function getLocation(url){var m=url.toLowerCase().match(reURI);var proto=m[2],domain=m[3],port=m[4]||"";if((proto=="http:"&&port==":80")||(proto=="https:"&&port==":443")){port="";}
return proto+"//"+domain+port;}
function resolveUrl(url){url=url.replace(reDoubleSlash,"$1/");if(!url.match(/^(http||https):\/\//)){var path=(url.substring(0,1)==="/")?"":location.pathname;if(path.substring(path.length-1)!=="/"){path=path.substring(0,path.lastIndexOf("/")+1);}
url=location.protocol+"//"+location.host+path+url;}
while(reParent.test(url)){url=url.replace(reParent,"");}
return url;}
function appendQueryParameters(url,parameters){var hash="",indexOf=url.indexOf("#");if(indexOf!==-1){hash=url.substring(indexOf);url=url.substring(0,indexOf);}
var q=[];for(var key in parameters){if(parameters.hasOwnProperty(key)){q.push(key+"="+encodeURIComponent(parameters[key]));}}
return url+(useHash?"#":(url.indexOf("?")==-1?"?":"&"))+q.join("&")+hash;}
var query=(function(input){input=input.substring(1).split("&");var data={},pair,i=input.length;while(i--){pair=input[i].split("=");data[pair[0]]=decodeURIComponent(pair[1]);}
return data;}(/xdm_e=/.test(location.search)?location.search:location.hash));function undef(v){return typeof v==="undefined";}
var getJSON=function(){var cached={};var obj={a:[1,2,3]},json="{\"a\":[1,2,3]}";if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(obj).replace((/\s/g),"")===json){return JSON;}
if(Object.toJSON){if(Object.toJSON(obj).replace((/\s/g),"")===json){cached.stringify=Object.toJSON;}}
if(typeof String.prototype.evalJSON==="function"){obj=json.evalJSON();if(obj.a&&obj.a.length===3&&obj.a[2]===3){cached.parse=function(str){return str.evalJSON();};}}
if(cached.stringify&&cached.parse){getJSON=function(){return cached;};return cached;}
return null;};function apply(destination,source,noOverwrite){var member;for(var prop in source){if(source.hasOwnProperty(prop)){if(prop in destination){member=source[prop];if(typeof member==="object"){apply(destination[prop],member,noOverwrite);}
else if(!noOverwrite){destination[prop]=source[prop];}}
else{destination[prop]=source[prop];}}}
return destination;}
function testForNamePropertyBug(){var form=document.body.appendChild(document.createElement("form")),input=form.appendChild(document.createElement("input"));input.name=IFRAME_PREFIX+"TEST"+channelId;HAS_NAME_PROPERTY_BUG=input!==form.elements[input.name];document.body.removeChild(form);}
function createFrame(config){if(undef(HAS_NAME_PROPERTY_BUG)){testForNamePropertyBug();}
var frame;if(HAS_NAME_PROPERTY_BUG){frame=document.createElement("<iframe name=\""+config.props.name+"\"/>");}
else{frame=document.createElement("IFRAME");frame.name=config.props.name;}
frame.id=frame.name=config.props.name;delete config.props.name;if(typeof config.container=="string"){config.container=document.getElementById(config.container);}
if(!config.container){apply(frame.style,{position:"absolute",top:"-2000px",left:"0px"});config.container=document.body;}
var src=config.props.src;config.props.src="javascript:false";apply(frame,config.props);frame.border=frame.frameBorder=0;frame.allowTransparency=true;config.container.appendChild(frame);if(config.onLoad){on(frame,"load",config.onLoad);}
if(config.usePost){var form=config.container.appendChild(document.createElement('form')),input;form.target=frame.name;form.action=src;form.method='POST';if(typeof(config.usePost)==='object'){for(var i in config.usePost){if(config.usePost.hasOwnProperty(i)){if(HAS_NAME_PROPERTY_BUG){input=document.createElement('<input name="'+i+'"/>');}else{input=document.createElement("INPUT");input.name=i;}
input.value=config.usePost[i];form.appendChild(input);}}}
form.submit();form.parentNode.removeChild(form);}else{frame.src=src;}
config.props.src=src;return frame;}
function checkAcl(acl,domain){if(typeof acl=="string"){acl=[acl];}
var re,i=acl.length;while(i--){re=acl[i];re=new RegExp(re.substr(0,1)=="^"?re:("^"+re.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"));if(re.test(domain)){return true;}}
return false;}
function prepareTransportStack(config){var protocol=config.protocol,stackEls;config.isHost=config.isHost||undef(query.xdm_p);useHash=config.hash||false;if(!config.props){config.props={};}
if(!config.isHost){config.channel=query.xdm_c.replace(/["'<>\\]/g,"");config.secret=query.xdm_s;config.remote=query.xdm_e.replace(/["'<>\\]/g,"");;protocol=query.xdm_p;if(config.acl&&!checkAcl(config.acl,config.remote)){throw new Error("Access denied for "+config.remote);}}
else{config.remote=resolveUrl(config.remote);config.channel=config.channel||"default"+channelId++;config.secret=Math.random().toString(16).substring(2);if(undef(protocol)){if(getLocation(location.href)==getLocation(config.remote)){protocol="4";}
else if(isHostMethod(window,"postMessage")||isHostMethod(document,"postMessage")){protocol="1";}
else if(config.swf&&isHostMethod(window,"ActiveXObject")&&hasFlash()){protocol="6";}
else if(navigator.product==="Gecko"&&"frameElement"in window&&navigator.userAgent.indexOf('WebKit')==-1){protocol="5";}
else if(config.remoteHelper){protocol="2";}
else{protocol="0";}}}
config.protocol=protocol;switch(protocol){case "0":apply(config,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(config.isHost){if(!config.local){var domain=location.protocol+"//"+location.host,images=document.body.getElementsByTagName("img"),image;var i=images.length;while(i--){image=images[i];if(image.src.substring(0,domain.length)===domain){config.local=image.src;break;}}
if(!config.local){config.local=window;}}
var parameters={xdm_c:config.channel,xdm_p:0};if(config.local===window){config.usePolling=true;config.useParent=true;config.local=location.protocol+"//"+location.host+location.pathname+location.search;parameters.xdm_e=config.local;parameters.xdm_pa=1;}
else{parameters.xdm_e=resolveUrl(config.local);}
if(config.container){config.useResize=false;parameters.xdm_po=1;}
config.remote=appendQueryParameters(config.remote,parameters);}
else{apply(config,{channel:query.xdm_c,remote:query.xdm_e,useParent:!undef(query.xdm_pa),usePolling:!undef(query.xdm_po),useResize:config.useParent?false:config.useResize});}
stackEls=[new easyXDM.stack.HashTransport(config),new easyXDM.stack.ReliableBehavior({}),new easyXDM.stack.QueueBehavior({encode:true,maxLength:4000-config.remote.length}),new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case "1":stackEls=[new easyXDM.stack.PostMessageTransport(config)];break;case "2":if(config.isHost){config.remoteHelper=resolveUrl(config.remoteHelper);}
stackEls=[new easyXDM.stack.NameTransport(config),new easyXDM.stack.QueueBehavior(),new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case "3":stackEls=[new easyXDM.stack.NixTransport(config)];break;case "4":stackEls=[new easyXDM.stack.SameOriginTransport(config)];break;case "5":stackEls=[new easyXDM.stack.FrameElementTransport(config)];break;case "6":if(!flashVersion){hasFlash();}
stackEls=[new easyXDM.stack.FlashTransport(config)];break;}
stackEls.push(new easyXDM.stack.QueueBehavior({lazy:config.lazy,remove:true}));return stackEls;}
function chainStack(stackElements){var stackEl,defaults={incoming:function(message,origin){this.up.incoming(message,origin);},outgoing:function(message,recipient){this.down.outgoing(message,recipient);},callback:function(success){this.up.callback(success);},init:function(){this.down.init();},destroy:function(){this.down.destroy();}};for(var i=0,len=stackElements.length;i<len;i++){stackEl=stackElements[i];apply(stackEl,defaults,true);if(i!==0){stackEl.down=stackElements[i-1];}
if(i!==len-1){stackEl.up=stackElements[i+1];}}
return stackEl;}
function removeFromStack(element){element.up.down=element.down;element.down.up=element.up;element.up=element.down=null;}
apply(easyXDM,{version:"2.4.19",query:query,stack:{},apply:apply,getJSONObject:getJSON,whenReady:whenReady,noConflict:noConflict});easyXDM.DomHelper={on:on,un:un,requiresJSON:function(path){if(!isHostObject(window,"JSON")){document.write('<'+'script type="text/javascript" src="'+path+'"><'+'/script>');}}};(function(){var _map={};easyXDM.Fn={set:function(name,fn){_map[name]=fn;},get:function(name,del){if(!_map.hasOwnProperty(name)){return;}
var fn=_map[name];if(del){delete _map[name];}
return fn;}};}());easyXDM.Socket=function(config){var stack=chainStack(prepareTransportStack(config).concat([{incoming:function(message,origin){config.onMessage(message,origin);},callback:function(success){if(config.onReady){config.onReady(success);}}}])),recipient=getLocation(config.remote);this.origin=getLocation(config.remote);this.destroy=function(){stack.destroy();};this.postMessage=function(message){stack.outgoing(message,recipient);};stack.init();};easyXDM.Rpc=function(config,jsonRpcConfig){if(jsonRpcConfig.local){for(var method in jsonRpcConfig.local){if(jsonRpcConfig.local.hasOwnProperty(method)){var member=jsonRpcConfig.local[method];if(typeof member==="function"){jsonRpcConfig.local[method]={method:member};}}}}
var stack=chainStack(prepareTransportStack(config).concat([new easyXDM.stack.RpcBehavior(this,jsonRpcConfig),{callback:function(success){if(config.onReady){config.onReady(success);}}}]));this.origin=getLocation(config.remote);this.destroy=function(){stack.destroy();};stack.init();};easyXDM.stack.SameOriginTransport=function(config){var pub,frame,send,targetOrigin;return(pub={outgoing:function(message,domain,fn){send(message);if(fn){fn();}},destroy:function(){if(frame){frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:location.protocol+"//"+location.host+location.pathname,xdm_c:config.channel,xdm_p:4}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);easyXDM.Fn.set(config.channel,function(sendFn){send=sendFn;setTimeout(function(){pub.up.callback(true);},0);return function(msg){pub.up.incoming(msg,targetOrigin);};});}
else{send=getParentObject().Fn.get(config.channel,true)(function(msg){pub.up.incoming(msg,targetOrigin);});setTimeout(function(){pub.up.callback(true);},0);}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.FlashTransport=function(config){var pub,frame,send,targetOrigin,swf,swfContainer;function onMessage(message,origin){setTimeout(function(){pub.up.incoming(message,targetOrigin);},0);}
function addSwf(domain){var url=config.swf+"?host="+config.isHost;var id="easyXDM_swf_"+Math.floor(Math.random()*10000);easyXDM.Fn.set("flash_loaded"+domain.replace(/[\-.]/g,"_"),function(){easyXDM.stack.FlashTransport[domain].swf=swf=swfContainer.firstChild;var queue=easyXDM.stack.FlashTransport[domain].queue;for(var i=0;i<queue.length;i++){queue[i]();}
queue.length=0;});if(config.swfContainer){swfContainer=(typeof config.swfContainer=="string")?document.getElementById(config.swfContainer):config.swfContainer;}
else{swfContainer=document.createElement('div');apply(swfContainer.style,HAS_FLASH_THROTTLED_BUG&&config.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0});document.body.appendChild(swfContainer);}
var flashVars="callback=flash_loaded"+encodeURIComponent(domain.replace(/[\-.]/g,"_"))
+"&proto="+global.location.protocol
+"&domain="+encodeURIComponent(getDomainName(global.location.href))
+"&port="+encodeURIComponent(getPort(global.location.href))
+"&ns="+encodeURIComponent(namespace);swfContainer.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+id+"' data='"+url+"'>"+
"<param name='allowScriptAccess' value='always'></param>"+
"<param name='wmode' value='transparent'>"+
"<param name='movie' value='"+
url+
"'></param>"+
"<param name='flashvars' value='"+
flashVars+
"'></param>"+
"<embed type='application/x-shockwave-flash' FlashVars='"+
flashVars+
"' allowScriptAccess='always' wmode='transparent' src='"+
url+
"' height='1' width='1'></embed>"+
"</object>";}
return(pub={outgoing:function(message,domain,fn){swf.postMessage(config.channel,message.toString());if(fn){fn();}},destroy:function(){try{swf.destroyChannel(config.channel);}
catch(e){}
swf=null;if(frame){frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=config.remote;easyXDM.Fn.set("flash_"+config.channel+"_init",function(){setTimeout(function(){pub.up.callback(true);});});easyXDM.Fn.set("flash_"+config.channel+"_onMessage",onMessage);config.swf=resolveUrl(config.swf);var swfdomain=getDomainName(config.swf);var fn=function(){easyXDM.stack.FlashTransport[swfdomain].init=true;swf=easyXDM.stack.FlashTransport[swfdomain].swf;swf.createChannel(config.channel,config.secret,getLocation(config.remote),config.isHost);if(config.isHost){if(HAS_FLASH_THROTTLED_BUG&&config.swfNoThrottle){apply(config.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"});}
apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:6,xdm_s:config.secret}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);}};if(easyXDM.stack.FlashTransport[swfdomain]&&easyXDM.stack.FlashTransport[swfdomain].init){fn();}
else{if(!easyXDM.stack.FlashTransport[swfdomain]){easyXDM.stack.FlashTransport[swfdomain]={queue:[fn]};addSwf(swfdomain);}
else{easyXDM.stack.FlashTransport[swfdomain].queue.push(fn);}}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.PostMessageTransport=function(config){var pub,frame,callerWindow,targetOrigin;function _getOrigin(event){if(event.origin){return getLocation(event.origin);}
if(event.uri){return getLocation(event.uri);}
if(event.domain){return location.protocol+"//"+event.domain;}
throw "Unable to retrieve the origin of the event";}
function _window_onMessage(event){var origin=_getOrigin(event);if(origin==targetOrigin&&event.data.substring(0,config.channel.length+1)==config.channel+" "){pub.up.incoming(event.data.substring(config.channel.length+1),origin);}}
return(pub={outgoing:function(message,domain,fn){callerWindow.postMessage(config.channel+" "+message,domain||targetOrigin);if(fn){fn();}},destroy:function(){un(window,"message",_window_onMessage);if(frame){callerWindow=null;frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){var waitForReady=function(event){if(event.data==config.channel+"-ready"){callerWindow=("postMessage"in frame.contentWindow)?frame.contentWindow:frame.contentWindow.document;un(window,"message",waitForReady);on(window,"message",_window_onMessage);setTimeout(function(){pub.up.callback(true);},0);}};on(window,"message",waitForReady);apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:1}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);}
else{on(window,"message",_window_onMessage);callerWindow=("postMessage"in window.parent)?window.parent:window.parent.document;callerWindow.postMessage(config.channel+"-ready",targetOrigin);setTimeout(function(){pub.up.callback(true);},0);}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.FrameElementTransport=function(config){var pub,frame,send,targetOrigin;return(pub={outgoing:function(message,domain,fn){send.call(this,message);if(fn){fn();}},destroy:function(){if(frame){frame.parentNode.removeChild(frame);frame=null;}},onDOMReady:function(){targetOrigin=getLocation(config.remote);if(config.isHost){apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:5}),name:IFRAME_PREFIX+config.channel+"_provider"});frame=createFrame(config);frame.fn=function(sendFn){delete frame.fn;send=sendFn;setTimeout(function(){pub.up.callback(true);},0);return function(msg){pub.up.incoming(msg,targetOrigin);};};}
else{if(document.referrer&&getLocation(document.referrer)!=query.xdm_e){window.top.location=query.xdm_e;}
send=window.frameElement.fn(function(msg){pub.up.incoming(msg,targetOrigin);});pub.up.callback(true);}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.NameTransport=function(config){var pub;var isHost,callerWindow,remoteWindow,readyCount,callback,remoteOrigin,remoteUrl;function _sendMessage(message){var url=config.remoteHelper+(isHost?"#_3":"#_2")+config.channel;callerWindow.contentWindow.sendMessage(message,url);}
function _onReady(){if(isHost){if(++readyCount===2||!isHost){pub.up.callback(true);}}
else{_sendMessage("ready");pub.up.callback(true);}}
function _onMessage(message){pub.up.incoming(message,remoteOrigin);}
function _onLoad(){if(callback){setTimeout(function(){callback(true);},0);}}
return(pub={outgoing:function(message,domain,fn){callback=fn;_sendMessage(message);},destroy:function(){callerWindow.parentNode.removeChild(callerWindow);callerWindow=null;if(isHost){remoteWindow.parentNode.removeChild(remoteWindow);remoteWindow=null;}},onDOMReady:function(){isHost=config.isHost;readyCount=0;remoteOrigin=getLocation(config.remote);config.local=resolveUrl(config.local);if(isHost){easyXDM.Fn.set(config.channel,function(message){if(isHost&&message==="ready"){easyXDM.Fn.set(config.channel,_onMessage);_onReady();}});remoteUrl=appendQueryParameters(config.remote,{xdm_e:config.local,xdm_c:config.channel,xdm_p:2});apply(config.props,{src:remoteUrl+'#'+config.channel,name:IFRAME_PREFIX+config.channel+"_provider"});remoteWindow=createFrame(config);}
else{config.remoteHelper=config.remote;easyXDM.Fn.set(config.channel,_onMessage);}
var onLoad=function(){var w=callerWindow||this;un(w,"load",onLoad);easyXDM.Fn.set(config.channel+"_load",_onLoad);(function test(){if(typeof w.contentWindow.sendMessage=="function"){_onReady();}
else{setTimeout(test,50);}}());};callerWindow=createFrame({props:{src:config.local+"#_4"+config.channel},onLoad:onLoad});},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.HashTransport=function(config){var pub;var me=this,isHost,_timer,pollInterval,_lastMsg,_msgNr,_listenerWindow,_callerWindow;var useParent,_remoteOrigin;function _sendMessage(message){if(!_callerWindow){return;}
var url=config.remote+"#"+(_msgNr++)+"_"+message;((isHost||!useParent)?_callerWindow.contentWindow:_callerWindow).location=url;}
function _handleHash(hash){_lastMsg=hash;pub.up.incoming(_lastMsg.substring(_lastMsg.indexOf("_")+1),_remoteOrigin);}
function _pollHash(){if(!_listenerWindow){return;}
var href=_listenerWindow.location.href,hash="",indexOf=href.indexOf("#");if(indexOf!=-1){hash=href.substring(indexOf);}
if(hash&&hash!=_lastMsg){_handleHash(hash);}}
function _attachListeners(){_timer=setInterval(_pollHash,pollInterval);}
return(pub={outgoing:function(message,domain){_sendMessage(message);},destroy:function(){window.clearInterval(_timer);if(isHost||!useParent){_callerWindow.parentNode.removeChild(_callerWindow);}
_callerWindow=null;},onDOMReady:function(){isHost=config.isHost;pollInterval=config.interval;_lastMsg="#"+config.channel;_msgNr=0;useParent=config.useParent;_remoteOrigin=getLocation(config.remote);if(isHost){apply(config.props,{src:config.remote,name:IFRAME_PREFIX+config.channel+"_provider"});if(useParent){config.onLoad=function(){_listenerWindow=window;_attachListeners();pub.up.callback(true);};}
else{var tries=0,max=config.delay/50;(function getRef(){if(++tries>max){throw new Error("Unable to reference listenerwindow");}
try{_listenerWindow=_callerWindow.contentWindow.frames[IFRAME_PREFIX+config.channel+"_consumer"];}
catch(ex){}
if(_listenerWindow){_attachListeners();pub.up.callback(true);}
else{setTimeout(getRef,50);}}());}
_callerWindow=createFrame(config);}
else{_listenerWindow=window;_attachListeners();if(useParent){_callerWindow=parent;pub.up.callback(true);}
else{apply(config,{props:{src:config.remote+"#"+config.channel+new Date(),name:IFRAME_PREFIX+config.channel+"_consumer"},onLoad:function(){pub.up.callback(true);}});_callerWindow=createFrame(config);}}},init:function(){whenReady(pub.onDOMReady,pub);}});};easyXDM.stack.ReliableBehavior=function(config){var pub,callback;var idOut=0,idIn=0,currentMessage="";return(pub={incoming:function(message,origin){var indexOf=message.indexOf("_"),ack=message.substring(0,indexOf).split(",");message=message.substring(indexOf+1);if(ack[0]==idOut){currentMessage="";if(callback){callback(true);}}
if(message.length>0){pub.down.outgoing(ack[1]+","+idOut+"_"+currentMessage,origin);if(idIn!=ack[1]){idIn=ack[1];pub.up.incoming(message,origin);}}},outgoing:function(message,origin,fn){currentMessage=message;callback=fn;pub.down.outgoing(idIn+","+(++idOut)+"_"+message,origin);}});};easyXDM.stack.QueueBehavior=function(config){var pub,queue=[],waiting=true,incoming="",destroying,maxLength=0,lazy=false,doFragment=false;function dispatch(){if(config.remove&&queue.length===0){removeFromStack(pub);return;}
if(waiting||queue.length===0||destroying){return;}
waiting=true;var message=queue.shift();pub.down.outgoing(message.data,message.origin,function(success){waiting=false;if(message.callback){setTimeout(function(){message.callback(success);},0);}
dispatch();});}
return(pub={init:function(){if(undef(config)){config={};}
if(config.maxLength){maxLength=config.maxLength;doFragment=true;}
if(config.lazy){lazy=true;}
else{pub.down.init();}},callback:function(success){waiting=false;var up=pub.up;dispatch();up.callback(success);},incoming:function(message,origin){if(doFragment){var indexOf=message.indexOf("_"),seq=parseInt(message.substring(0,indexOf),10);incoming+=message.substring(indexOf+1);if(seq===0){if(config.encode){incoming=decodeURIComponent(incoming);}
pub.up.incoming(incoming,origin);incoming="";}}
else{pub.up.incoming(message,origin);}},outgoing:function(message,origin,fn){if(config.encode){message=encodeURIComponent(message);}
var fragments=[],fragment;if(doFragment){while(message.length!==0){fragment=message.substring(0,maxLength);message=message.substring(fragment.length);fragments.push(fragment);}
while((fragment=fragments.shift())){queue.push({data:fragments.length+"_"+fragment,origin:origin,callback:fragments.length===0?fn:null});}}
else{queue.push({data:message,origin:origin,callback:fn});}
if(lazy){pub.down.init();}
else{dispatch();}},destroy:function(){destroying=true;pub.down.destroy();}});};easyXDM.stack.VerifyBehavior=function(config){var pub,mySecret,theirSecret,verified=false;function startVerification(){mySecret=Math.random().toString(16).substring(2);pub.down.outgoing(mySecret);}
return(pub={incoming:function(message,origin){var indexOf=message.indexOf("_");if(indexOf===-1){if(message===mySecret){pub.up.callback(true);}
else if(!theirSecret){theirSecret=message;if(!config.initiate){startVerification();}
pub.down.outgoing(message);}}
else{if(message.substring(0,indexOf)===theirSecret){pub.up.incoming(message.substring(indexOf+1),origin);}}},outgoing:function(message,origin,fn){pub.down.outgoing(mySecret+"_"+message,origin,fn);},callback:function(success){if(config.initiate){startVerification();}}});};easyXDM.stack.RpcBehavior=function(proxy,config){var pub,serializer=config.serializer||getJSON();var _callbackCounter=0,_callbacks={};function _send(data){data.jsonrpc="2.0";pub.down.outgoing(serializer.stringify(data));}
function _createMethod(definition,method){var slice=Array.prototype.slice;return function(){var l=arguments.length,callback,message={method:method};if(l>0&&typeof arguments[l-1]==="function"){if(l>1&&typeof arguments[l-2]==="function"){callback={success:arguments[l-2],error:arguments[l-1]};message.params=slice.call(arguments,0,l-2);}
else{callback={success:arguments[l-1]};message.params=slice.call(arguments,0,l-1);}
_callbacks[""+(++_callbackCounter)]=callback;message.id=_callbackCounter;}
else{message.params=slice.call(arguments,0);}
if(definition.namedParams&&message.params.length===1){message.params=message.params[0];}
_send(message);};}
function _executeMethod(method,id,fn,params){if(!fn){if(id){_send({id:id,error:{code:-32601,message:"Procedure not found."}});}
return;}
var success,error;if(id){success=function(result){success=emptyFn;_send({id:id,result:result});};error=function(message,data){error=emptyFn;var msg={id:id,error:{code:-32099,message:message}};if(data){msg.error.data=data;}
_send(msg);};}
else{success=error=emptyFn;}
if(!isArray(params)){params=[params];}
try{var result=fn.method.apply(fn.scope,params.concat([success,error]));if(!undef(result)){success(result);}}
catch(ex1){error(ex1.message);}}
return(pub={incoming:function(message,origin){var data=serializer.parse(message);if(data.method){if(config.handle){config.handle(data,_send);}
else{_executeMethod(data.method,data.id,config.local[data.method],data.params);}}
else{var callback=_callbacks[data.id];if(data.error){if(callback.error){callback.error(data.error);}}
else if(callback.success){callback.success(data.result);}
delete _callbacks[data.id];}},init:function(){if(config.remote){for(var method in config.remote){if(config.remote.hasOwnProperty(method)){proxy[method]=_createMethod(config.remote[method],method);}}}
pub.down.init();},destroy:function(){for(var method in config.remote){if(config.remote.hasOwnProperty(method)&&proxy.hasOwnProperty(method)){delete proxy[method];}}
pub.down.destroy();}});};module.exports=easyXDM;})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);}),1068:(function(module,exports,__webpack_require__){var easyXDM=__webpack_require__(1067);window.loadView=function(opts){window.name=META.id;var use_backup_content=typeof opts!='undefined'&&opts.use_backup_content!=undefined?opts.use_backup_content:false;var app_el=typeof opts!='undefined'&&opts.app_el!=undefined?opts.app_el:$('#appView');for(var key in GLOBALS){window[key]=GLOBALS[key];}
var model_name=META.app_type+'AppModel';if(META.soft_alias){window[model_name]=window[META.app_namespace+'AppModel'];}
if(window.ENVIRONMENT=='development'||window.ENVIRONMENT=='staging'){initializePlatformsForQA();}
window.APP_MODEL=new window[model_name]();if(use_backup_content){for(var key in BACKUP_CONTENT){if(BACKUP_CONTENT[key]!='undefined'){APP_MODEL.set(key,BACKUP_CONTENT[key]);}}}else{for(var key in CONTENT){if(CONTENT[key]!='undefined'){APP_MODEL.set(key,CONTENT[key]);}}}
APP_MODEL.meta={};for(var key in META){if(META[key]!='undefined'){APP_MODEL.meta[key]=META[key];}}
APP_MODEL.afterMount();if(META.password_protected_template){$('body').append(META.password_protected_template);}
window.APP_VIEW=new window[META.app_namespace+'AppView']({el:'#'+app_el.attr('id'),model:APP_MODEL});if($.inArray(META.external_id_type,['weebly-integrated','design-editor','webydo','bookmark','cloudflare','wordpress'])>-1){debug()('Updating through local storage');setInterval(function(){if(typeof META=='undefined'){return;}
var data=localStorage.getItem('powr_data_'+META.id);if(data==undefined||data==null||data=='null'){return;}
data=JSON.parse(data);var locals=APP_MODEL.get('locals');for(var i in data.content){if(i=='locals'){for(var j in data.content.locals){APP_MODEL.attributes.locals[j]=data.content.locals[j];}}else{APP_MODEL.attributes[i]=data.content[i];}}
if(typeof PLATFORM_DATA!='undefined'){loadPlatformData(PLATFORM_DATA,{render:false});}
APP_VIEW.render();localStorage.removeItem('powr_data_'+META.id);},100);}
loadViewInitializers();};function loadViewInitializers(){if(META.premium_status=='free'){$('.loadingWrapper').show();}
if(META.edit_me){if(META.external_id_type=='jimdo'){$('#editMe').css({marginTop:'20px'});}
$('#editMe').fadeIn('fast');}
$('link[rel="canonical"]').attr('href',baseUri()+'/plugins/view?id='+META.id);if(META.admin_debug_panel){$('body').append(META.admin_debug_panel);}
var mode=getURLParameter('mode');if(mode=='page'){var marginValues=window.isMobile()?'5% 10px':'5% 15%';$('html').css({overflow:'auto'});$('#appView').css({margin:marginValues});}else if(mode=='scroll'){$('html').css({overflow:'auto'});}else{$('html').css({overflow:'hidden'});}}
function loadViewListeners(){try{window.APP_SOCKET=new easyXDM.Socket({onMessage:function onMessage(message){var m=JSON.parse(message);debug()('Message in app:',m);if(m.action&&m.action=='activate'){$('#editMe').fadeIn();}else if(m.action&&m.action=='deactivate'){$('#editMe').fadeOut();}}});}catch(err){debug()('Could not establish socket connection: '+err);}
function windowMessageReceived(evt){debug()('View received settings, evt is',evt);try{var response=JSON.parse(evt.data);}catch(err){debug()("Couldn't json parse data: ",err);return false;}
var response=JSON.parse(evt.data);if(response.message=='loaded'){var setParentOrigin=function setParentOrigin(){window.PARENT_ORIGIN=evt.origin;window.IFRAME_INDEX=response.data.iframe_index;if(typeof APP_MODEL=='undefined'){setTimeout(setParentOrigin,50);}else{APP_MODEL.setLocals({parent_origin:evt.origin,iframe_index:response.data.iframe_index,parent_window_height:response.data.parent_window_height,parent_window_width:response.data.parent_window_width});}};debug()('View received settings loaded. Evt origin is ',evt.origin);setParentOrigin();var r={message:'viewLoaded',data:{iframe_index:response.data.iframe_index}};parent.postMessage(JSON.stringify(r),evt.origin);if(typeof APP_VIEW!='undefined'){APP_VIEW.postSizeToSocket();}}
if(response.message=='loadView'){window.META=response.data.meta;window.GLOBALS=response.data.globals;window.CONTENT=response.data.content;loadView();window.APP_MODEL.setLocals({parent_origin:evt.origin,iframe_index:response.data.iframe_index});}else if(response.message=='showEdit'){$('#editMe, .adminAppInfo').fadeIn();}else if(response.message=='hideEdit'){$('#editMe, .adminAppInfo').hide();}else if(response.message=='update'&&APP_MODEL){var locals=APP_MODEL.get('locals');for(var i in response.data.content){if(i=='locals'){for(var j in response.data.content.locals){APP_MODEL.attributes.locals[j]=response.data.content.locals[j];}}else{APP_MODEL.attributes[i]=response.data.content[i];}}
APP_VIEW.render();}else if(response.message=='triggerPowrPopupClick'||response.message=='exitDocument'){if(APP_VIEW.openModal){APP_VIEW.openModal(response.message);}}else if(response.message=='platformData'){loadPlatformData(response.data);window.PLATFORM_DATA=response.data;}else if(response.message=='scrollPosition'&&APP_VIEW.receiveScrollPosition){APP_VIEW.receiveScrollPosition(response.scrollPercentage);}}
if(window.addEventListener){window.addEventListener('message',windowMessageReceived);}else{window.attachEvent('onmessage',windowMessageReceived);}
$(document).on('click','#editMe, .js-launchPopoutSettings, .js-unclaimed-cta',function(){if(typeof SETTINGS_WINDOW!='undefined'&&SETTINGS_WINDOW.close){SETTINGS_WINDOW.close();}
var h=Math.round(0.9*screen.height);var w=400;var o=Math.round(screen.width-w-0.1*screen.width);var url='/apps/'+META.app_type+'/settings?id='+META.true_id+'&demo_mode='+META.demo_mode+'&section=popup';if(META.template!=undefined){url+='&template='+META.template;}
if($(this).hasClass('js-unclaimed-cta')){url+='&triggerSignup=true';}
window.SETTINGS_WINDOW=window.open(url,'POWr Editor','width='+w+',height='+h+',top=-1000,left='+o+',location=no,status=no','false');});$('#editMe').hover(function(){$('.js-editMeMenu').stop().fadeIn(100,function(){APP_VIEW.postSizeToSocket();});},function(){$('.js-editMeMenu').stop().fadeOut(100,function(){APP_VIEW.postSizeToSocket();});});$('.js-editMeMenu').hover(function(){$('.js-editMeMenu').stop().show();},function(){$('.js-editMeMenu').stop().fadeOut(100,function(){APP_VIEW.postSizeToSocket();});});function editMePopover(){$('#editMe').popover({html:true,trigger:'hover',delay:{hide:850},viewport:{selector:'#apps-view',padding:0},template:'<div class="popover" role="tooltip" style="font-size: 12px;margin-top: 5px;z-index: 10000000;"><div class="arrow"></div><div class="popover-content"></div></div>'});}
if($(window).popover==undefined){setTimeout(function(){editMePopover();},2000);return;}else{editMePopover();}
$(document).on('click','.js-launchStandalone',function(){var standaloneUrl='/plugins/'+META.app_slug+'/standalone?id='+META.id;window.open(standaloneUrl);});$(document).on('click','.js-launchResponseDashboard',function(){var dashboardUrl='/apps/'+META.id+'/analytics';window.open(dashboardUrl);});$(window).on('beforeunload',function(){if(APP_MODEL.get('locals').isDirty&&$('#appSettings').length>0){return 'You have unsaved work with a POWr Plugin! If you leave this page you will lose any unsaved changes.';}});}
function loadPlatformData(platformData,opts){debug()('Trying to load platform data');if(typeof APP_MODEL=='undefined'){setTimeout(function(){loadPlatformData(platformData);},100);return;}
if(typeof opts=='undefined'){opts={render:true};}
debug()('Loading platform data',platformData);var hasChanged=false;var newPlatformData={};for(var key in platformData.content){if(typeof APP_MODEL.defaults()[key]!='undefined'&&APP_MODEL.attributes[key]!=platformData.content[key]){debug()('Default key: '+APP_MODEL.defaults()[key]);debug()('Response key: '+platformData.content[key]);if((APP_MODEL.defaults()[key]+'').slice(-2)=='px'&&(platformData.content[key]+'').slice(-2)!='px'){APP_MODEL.attributes[key]=platformData.content[key]+'px';newPlatformData[key]=platformData.content[key]+'px';}else{APP_MODEL.attributes[key]=platformData.content[key];newPlatformData[key]=platformData.content[key];}
hasChanged=true;}}
if(hasChanged&&opts.render){APP_VIEW.render();}}
function initializeWix(){if(typeof WIX_QA_APP_TYPE!='undefined'){window.wixStagingAppModel=window[WIX_QA_APP_TYPE+'AppModel'];window.wixLocalAppModel=wixStagingAppModel;window.localDevAppModel=wixStagingAppModel;window.wixIeLocalAppModel=wixStagingAppModel;}
window.VIEW_MODE=Wix.Utils.getViewMode();if(VIEW_MODE!='site'){loadView({use_backup_content:true});}else{loadView({use_backup_content:false});}
Wix.addEventListener(Wix.Events.SETTINGS_UPDATED,function(data){debug()('Wix settings updated:',data);APP_MODEL.attributes=data;APP_MODEL.meta.saved=true;APP_VIEW.render();});Wix.addEventListener(Wix.Events.SITE_PUBLISHED,function(data){debug()('site published');APP_MODEL.doSave({post_params:{wix_published:true}});});Wix.addEventListener(Wix.Events.COMPONENT_DELETED,function(data){debug()('app deleted');APP_MODEL.doSave({post_params:{wix_deleted:true}});});if(VIEW_MODE=='site'){Wix.currentMember(function(memberDetails){debug()('member details: ',memberDetails);if(memberDetails&&memberDetails.email){setTimeout(function(){deliverHash(memberDetails.email);},2000);}});}}
$(function(){if($('#apps-view, #apps-facebook_view').length>0){loadView();loadViewListeners();}
if($('#apps-cached_view, #views-show').length>0){debug()('In apps cached view');loadViewListeners();if(getURLParameter('load')=='async'){debug()('Async loading');window.LOAD_ME_INTERVAL=setInterval(function(){if(typeof META=='undefined'||META==undefined){if(typeof PARENT_ORIGIN!='undefined'&&typeof IFRAME_INDEX!='undefined'){var r={message:'loadMe',data:{iframe_index:IFRAME_INDEX}};parent.postMessage(JSON.stringify(r),PARENT_ORIGIN);}}else{clearInterval(LOAD_ME_INTERVAL);}},5000);}else{var url='/plugins/'+APP_DETAILS.slug+'/view.json?';if(getURLParameter('id')){url+='id='+getURLParameter('id');}else if(getURLParameter('unique_label')){url+='unique_label='+getURLParameter('unique_label')+'&powr_token='+getURLParameter('powr_token')+'&user_label='+getURLParameter('user_label');}else{url+='powr_token='+getURLParameter('powr_token')+'&user_label='+getURLParameter('user_label');}
if(getURLParameter('external_type')){url+='&external_type='+getURLParameter('external_type');}
var appSlugs=["microblog","event-gallery","photo-gallery","video-gallery","media-gallery","image-gallery","picture-gallery"];try{if(appSlugs.indexOf(APP_DETAILS.slug)>=0){var platform=null;var platformUrl=document.location.toString().split('#platform=');if(platformUrl.length>=1){var platform=platformUrl[1];}
url='/json/'+window.META.id+'?platform='+platform;}}catch(err){debug()('Error with short json URL endpoint',err);}
debug()('Calling to get app json. Url is '+url);ajaxController({url:url,type:'GET'},function(r){if(r.success){debug()('Success getting view data');window.META=r.meta;window.GLOBALS=r.globals;window.CONTENT=r.content;loadView();}else{debug()('Error getting view data');}});}}
if($('#apps-wix_view').length>0){initializeWix();}
if($('#apps-wix_cached_view').length>0){var url='/plugins/'+APP_DETAILS.slug+'/wix_view.json?'+originalQuery();ajaxController({url:url,type:'GET'},function(r){if(r.success){window.META=r.meta;window.GLOBALS=r.globals;window.VIEW_MODE=Wix.Utils.getViewMode();if(VIEW_MODE!='site'){window.BACKUP_CONTENT=r.content;}else{window.CONTENT=r.content;}
initializeWix();}else{debug()('Error getting wix view data');}});}});}),1119:(function(module,exports){function get_content(app_type,feed_post,share_on){var host_url=baseUri();var shared_link;var title='';var subtitle;var desc='';var image;var video_id;var type='text';var limit=APP_MODEL.attributes.charLimit||500;var feed_type='microblog';var share_hash;if(app_type==='microblog'){for(var i in feed_post.content){if(feed_post.content[i].contentUrl){shared_link=feed_post.content[i].contentUrl;}
if(feed_post.content[i].type==='title'){title=feed_post.content[i].content.substr(0,limit);}else if(feed_post.content[i].type==='subtitle'){subtitle=feed_post.content[i].content.substr(0,limit);}else if(feed_post.content[i].type==='text'){desc=feed_post.content[i].content.substr(0,limit);}else if(feed_post.content[i].type==='image'){image=feed_post.content[i].content;type='image';}else if(feed_post.content[i].type==='video'){image=feed_post.content[i].content;type='video';}else if(feed_post.content[i].type==='button'){desc=feed_post.content[i].text;link=feed_post.content[i].url;}else if(feed_post.content[i].type==='date'){desc=feed_post.content[i].content;}else if(feed_post.content[i].type==='document'){desc=feed_post.content[i].content;}else if(feed_post.content[i].type==='link'){desc=feed_post.content[i].text;}else if(feed_post.content[i].type==='paypalButton'){desc=feed_post.content[i].paypalButtonText;}}}else{feed_type=feed_post.type;title='Shared from '+feed_post.type+': '+feed_post.username;desc=feed_post.caption.substr(0,limit);if(feed_post.pictures[0]){image=feed_post.pictures[0];type='image';}else if(typeof feed_post.media_image!='undefined'){image=feed_post.media_image;type='image';}else if(typeof feed_post.retweet_media_image!='undefined'){image=feed_post.retweet_media_image;type='image';}else if(feed_type==='Youtube'){type='video';video_id=feed_post.video.videoId;image=feed_post.media_image;}else if(feed_type==='Dailymotion'){type='video';video_id=feed_post.video.videoId;image=feed_post.media_image;}else if(feed_type==='Vimeo'){type='video';video_id=feed_post.video.videoId;image=feed_post.video.videoImgId;}
shared_link=feed_post.shareLink;}
if(!title){if(subtitle){title=subtitle;}else{title='My gallery';}}
if(!desc){desc='See more on my '+APP_MODEL.meta.app_common_name;}
title=encodeURIComponent(title);desc=encodeURIComponent(desc.replace(/[\ud800-\udfff]/g,''));share_hash={title:title,description:desc,image:image,default_image:'https://s3-us-west-1.amazonaws.com/powr/social-feed-placeholder-color.png',shared_link:shared_link,type:type,app_type:app_type,feed_type:feed_type,video_id:video_id};return share_hash;}
function interpreter(app_type,feed_post,share_on){var url;if(app_type==='fileEmbed'){if(share_on==='google'){url='https://plus.google.com/share?url='+feed_post;}else if(share_on==='twitter'){url='https://twitter.com/share?text=&url='+feed_post;}else if(share_on==='tumblr'){url='https://www.tumblr.com/share/link?url='+feed_post;}else if(share_on==='facebook'){url='https://www.facebook.com/sharer/sharer.php?u='+feed_post;}else if(share_on==='email'){url='mailto:?subject=&body='+feed_post;}else if(share_on==='pinterest'){url='https://www.pinterest.com/pin/create/button/?url='+feed_post;}}else{var host_url=baseUri();var twitter_url;var tweet_url;var facebook_url;var fb_url;var google_url;var twitter_url_default_image;var share_data;var share_hash=get_content(app_type,feed_post,share_on);var tumblr_url;var share_image='';var share_link='';if(!share_hash.shared_link){share_hash.shared_link=host_url+'/plugins/'+APP_MODEL.meta.app_slug+'/view?id='+APP_MODEL.meta.id+'&mode=page';}
if(share_on==='facebook'){share_hash.title=share_hash.title.replace(/\./g,' ');share_hash.description=share_hash.description.replace(/\./g,' ');share_data=APP_MODEL.meta.id+'-app_type-'+APP_MODEL.meta.app_slug+'-title-'+share_hash.title+'-desc-'+share_hash.description+'-shared_link-1';}else{share_data=APP_MODEL.meta.id+'-app_type-'+APP_MODEL.meta.app_slug+'-title-'+share_hash.title+'-desc-'+share_hash.description+'-shared_link-'+share_hash.shared_link;share_data=share_data.replace(/\|/g,'%7C');share_data=share_data.replace(/\./g,'%2E');share_data=share_data.replace(/&/g,'%26');share_data=share_data.replace(/\?/g,'%3F');share_data=encodeURIComponent(share_data);share_data=encodeURIComponent(share_data);}
twitter_url=host_url+'/social-share/'+share_data+'/?image_to_share='+share_hash.image;twitter_url_default_image=host_url+'/social-share/'+share_data+'/?image_to_share='+share_hash.default_image;if(app_type==='socialFeed'&&share_hash.feed_type==='Twitter'){tweet_url='https://twitter.com/share?text='+share_hash.description+'&url='+share_hash.shared_link+'&original_referer='+share_hash.shared_link;}else{tweet_url='https://twitter.com/share?text=&url='+twitter_url;}
if(app_type==='microblog'){share_data=encodeURIComponent(share_data);facebook_url=host_url+'/social-share/'+share_data+'/?image_to_share='+share_hash.image;fb_url='https://www.facebook.com/sharer/sharer.php?u='+facebook_url;google_url='https://plus.google.com/share?url='+facebook_url;tumblr_url='https://www.tumblr.com/share/link?url='+twitter_url+'&posttype=link';}else{google_url='https://plus.google.com/share?url='+share_hash.shared_link;tumblr_url='https://www.tumblr.com/share/link?url='+share_hash.shared_link+'&posttype=link';if(share_hash.type==='text'&&share_hash.feed_type!='Twitter'){share_data=encodeURIComponent(share_data);facebook_url=host_url+'/social-share/'+share_data+'/?image_to_share=';fb_url='https://www.facebook.com/sharer/sharer.php?u='+facebook_url;}else{fb_url='https://www.facebook.com/sharer/sharer.php?u='+share_hash.shared_link;}}
share_hash.image=encodeURIComponent(share_hash.image);var pinterest_url='https://www.pinterest.com/pin/create/button/?url='+share_hash.shared_link+'&media='+share_hash.image+'&description='+share_hash.description.replace(/[\ud800-\udfff]/g,'');if(share_hash.shared_link){share_link='Shared link: '+share_hash.shared_link;}else{share_link='Shared link: '+host_url+'/plugins/'+APP_MODEL.meta.app_slug+'/view?id='+APP_MODEL.meta.id+'&mode=page';}
if(share_hash.shared_link&&app_type==='microblog'&&share_on!='pinterest'){google_url='https://plus.google.com/share?url='+share_hash.shared_link;tweet_url='https://twitter.com/share?text=&url='+share_hash.shared_link;tumblr_url='https://www.tumblr.com/share/link?url='+share_hash.shared_link+'&posttype=link';if(share_on==='google'){url=google_url;}else if(share_on==='twitter'){url=tweet_url;}else if(share_on==='tumblr'){url=tumblr_url;}else if(share_on==='facebook'){url=fb_url;}else if(share_on==='email'){url='mailto:?subject='+share_hash.title+'&body='+share_link;}}else{if(share_hash.type==='image'){if(share_on==='google'&&share_hash.feed_type!='Instagram'){url=google_url;}else if(share_on==='twitter'){url=tweet_url;}else if(share_on==='tumblr'){url=tumblr_url;}else if(share_on==='facebook'&&share_hash.feed_type!='Instagram'){url=fb_url;}else if(share_on==='email'){url='mailto:?subject='+share_hash.title+'&body='+share_link;}else if(share_on==='pinterest'){url=pinterest_url;}}else if(share_hash.type==='video'){if(share_on==='google'){if(app_type==='microblog'){url='https://plus.google.com/share?url='+share_hash.image;}else{url='https://plus.google.com/share?url='+share_hash.shared_link;}}else if(share_on==='twitter'){if(app_type==='microblog'){url='https://twitter.com/share?text='+share_hash.description+'&url='+share_hash.image+'&via=POWrPlugins';}else{url='https://twitter.com/share?text='+share_hash.description+'&url='+share_hash.shared_link+'&via=POWrPlugins';}}else if(share_on==='tumblr'){url='https://www.tumblr.com/share/link?url='+share_hash.image;}else if(share_on==='facebook'){if(app_type==='microblog'){url='https://www.facebook.com/sharer/sharer.php?u='+share_hash.image;}else{url=fb_url;}}else if(share_on==='email'){url='mailto:?subject='+share_hash.title+'&body='+share_link;}else if(share_on==='pinterest'){if(app_type==='microblog'){url='https://www.pinterest.com/pin/create/button/?url='+share_hash.shared_link+'&media='+share_hash.default_image+'&description='+share_hash.description;}else{if(share_hash.feed_type==='Youtube'){url='https://www.pinterest.com/pin/create/button/?url=https://www.youtube.com/attribution_link%252watch%253Fv%253D_'+share_hash.video_id+'%2526feature%253Dshare&description='+share_hash.description+'&is_video=true&media=https://img.youtube.com/vi/'+share_hash.video_id+'/default.jpg';}else if(share_hash.feed_type==='Dailymotion'){url='https://www.pinterest.com/pin/create/bookmarklet/?url=https://www.dailymotion.com%2Fvideo%2F'+share_hash.video_id+'&description='+share_hash.description+'&media=https://www.dailymotion.com/thumbnail/video/'+share_hash.video_id;}else if(share_hash.feed_type==='Vimeo'){url='https://www.pinterest.com/pin/create/button/?media=https://i.vimeocdn.com/video/'+share_hash.video_id+'_1280x720.jpg&url=https://vimeo.com/'+share_hash.video_id_img+'&is_video=true&description='+share_hash.description;}}}}else if(share_hash.type==='text'){var content=shareContent('dynamic','text=',feed_post,150);if(share_on==='google'){url=google_url;}else if(share_on==='twitter'){url='https://twitter.com/intent/tweet?'+content+'&url='+share_hash.shared_link+'&via=POWrPlugins';}else if(share_on==='tumblr'){url='https://www.tumblr.com/share/link?url='+twitter_url_default_image;}else if(share_on==='facebook'){url=fb_url;}else if(share_on==='email'){url='mailto:?subject='+share_hash.title+'&body='+share_link;}else if(share_on==='pinterest'){url='https://www.pinterest.com/pin/create/button/?url='+share_hash.shared_link+'&media='+share_hash.default_image+'&description='+share_hash.description;}}}}
if(url&&url.substr(-1)==='/'){url=url.slice(0,-1);}
return url;}
window.sharinator=function(app_type,feed_post,share_on){return interpreter(app_type,feed_post,share_on);};function shareContent(type,pre,blog,limit){limit=limit||10000;if(type=='dynamic'){for(var i in blog.content){if(blog.content[i].type=='title'){return encodeURI(pre+blog.content[i].content).substr(0,limit);}else if(blog.content[i].type=='subtitle'){return encodeURI(pre+blog.content[i].content).substr(0,limit);}else if(blog.content[i].type=='text'){return encodeURI(pre+blog.content[i].content).substr(0,limit);}}
return null;}else if(type=='image'){for(var i in blog.content){if(blog.content[i].type==type){return pre+blog.content[i].content;}}
return null;}else{for(var i in blog.content){if(blog.content[i].type==type){return encodeURI(pre+blog.content[i].content).substr(0,limit);}}
return null;}}}),1130:(function(module,exports,__webpack_require__){var __WEBPACK_LOCAL_MODULE_0__,__WEBPACK_LOCAL_MODULE_0__factory,__WEBPACK_LOCAL_MODULE_0__module;var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_LOCAL_MODULE_1__;var __WEBPACK_LOCAL_MODULE_2__,__WEBPACK_LOCAL_MODULE_2__factory,__WEBPACK_LOCAL_MODULE_2__module;var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_LOCAL_MODULE_3__;var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_LOCAL_MODULE_4__;var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_LOCAL_MODULE_5__;var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};/*!
* Masonry PACKAGED v4.0.0
* Cascading grid layout library
* http://masonry.desandro.com
* MIT License
* by David DeSandro
*/(function factory(window,jQuery){'use strict';var arraySlice=Array.prototype.slice;var console=window.console;var logError=typeof console=='undefined'?function(){}:function(message){console.error(message);};function jQueryBridget(namespace,PluginClass,$){$=$||jQuery||window.jQuery;if(!$){return;}
if(!PluginClass.prototype.option){PluginClass.prototype.option=function(opts){if(!$.isPlainObject(opts)){return;}
this.options=$.extend(true,this.options,opts);};}
$.fn[namespace]=function(arg0){if(typeof arg0=='string'){var args=arraySlice.call(arguments,1);return methodCall(this,arg0,args);}
plainCall(this,arg0);return this;};function methodCall($elems,methodName,args){var returnValue;var pluginMethodStr='$().'+namespace+'("'+methodName+'")';$elems.each(function(i,elem){var instance=$.data(elem,namespace);if(!instance){logError(namespace+' not initialized. Cannot call methods, i.e. '+pluginMethodStr);return;}
var method=instance[methodName];if(!method||methodName.charAt(0)=='_'){logError(pluginMethodStr+' is not a valid method');return;}
var value=method.apply(instance,args);returnValue=returnValue===undefined?value:returnValue;});return returnValue!==undefined?returnValue:$elems;}
function plainCall($elems,options){$elems.each(function(i,elem){var instance=$.data(elem,namespace);if(instance){instance.option(options);instance._init();}else{instance=new PluginClass(elem,options);$.data(elem,namespace,instance);}});}
updateJQuery($);}
function updateJQuery($){if(!$||$&&$.bridget){return;}
$.bridget=jQueryBridget;}
updateJQuery(jQuery||window.jQuery);return jQueryBridget;})(window,window.$);(function(global,factory){if(true){!(__WEBPACK_LOCAL_MODULE_0__factory=(factory),(__WEBPACK_LOCAL_MODULE_0__module={id:"ev-emitter/ev-emitter",exports:{},loaded:false}),__WEBPACK_LOCAL_MODULE_0__=(typeof __WEBPACK_LOCAL_MODULE_0__factory==='function'?(__WEBPACK_LOCAL_MODULE_0__factory.call(__WEBPACK_LOCAL_MODULE_0__module.exports,__webpack_require__,__WEBPACK_LOCAL_MODULE_0__module.exports,__WEBPACK_LOCAL_MODULE_0__module)):__WEBPACK_LOCAL_MODULE_0__factory),(__WEBPACK_LOCAL_MODULE_0__module.loaded=true),__WEBPACK_LOCAL_MODULE_0__===undefined&&(__WEBPACK_LOCAL_MODULE_0__=__WEBPACK_LOCAL_MODULE_0__module.exports));}else{}})(this,function(){function EvEmitter(){}
var proto=EvEmitter.prototype;proto.on=function(eventName,listener){if(!eventName||!listener){return;}
var events=this._events=this._events||{};var listeners=events[eventName]=events[eventName]||[];if(listeners.indexOf(listener)==-1){listeners.push(listener);}
return this;};proto.once=function(eventName,listener){if(!eventName||!listener){return;}
this.on(eventName,listener);var onceEvents=this._onceEvents=this._onceEvents||{};var onceListeners=onceEvents[eventName]=onceEvents[eventName]||[];onceListeners[listener]=true;return this;};proto.off=function(eventName,listener){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return;}
var index=listeners.indexOf(listener);if(index!=-1){listeners.splice(index,1);}
return this;};proto.emitEvent=function(eventName,args){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return;}
var i=0;var listener=listeners[i];args=args||[];var onceListeners=this._onceEvents&&this._onceEvents[eventName];while(listener){var isOnce=onceListeners&&onceListeners[listener];if(isOnce){this.off(eventName,listener);delete onceListeners[listener];}
listener.apply(this,args);i+=isOnce?0:1;listener=listeners[i];}
return this;};return EvEmitter;});/*!
* getSize v2.0.2
* measure size of elements
* MIT license
*/(function(window,factory){'use strict';if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_LOCAL_MODULE_1__=((function(){return factory();}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__)));}else{}})(window,function factory(){'use strict';function getStyleSize(value){var num=parseFloat(value);var isValid=value.indexOf('%')==-1&&!isNaN(num);return isValid&&num;}
function noop(){}
var logError=typeof console=='undefined'?noop:function(message){console.error(message);};var measurements=['paddingLeft','paddingRight','paddingTop','paddingBottom','marginLeft','marginRight','marginTop','marginBottom','borderLeftWidth','borderRightWidth','borderTopWidth','borderBottomWidth'];var measurementsLength=measurements.length;function getZeroSize(){var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var i=0;i<measurementsLength;i++){var measurement=measurements[i];size[measurement]=0;}
return size;}
function getStyle(elem){var style=getComputedStyle(elem);if(!style){logError('Style returned '+style+'. Are you running this code in a hidden iframe on Firefox? '+'See http://bit.ly/getsizebug1');}
return style;}
var isSetup=false;var isBoxSizeOuter;function setup(){if(isSetup){return;}
isSetup=true;var div=document.createElement('div');div.style.width='200px';div.style.padding='1px 2px 3px 4px';div.style.borderStyle='solid';div.style.borderWidth='1px 2px 3px 4px';div.style.boxSizing='border-box';var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);getSize.isBoxSizeOuter=isBoxSizeOuter=getStyleSize(style.width)==200;body.removeChild(div);}
function getSize(elem){setup();if(typeof elem=='string'){elem=document.querySelector(elem);}
if(!elem||(typeof elem==='undefined'?'undefined':_typeof(elem))!='object'||!elem.nodeType){return;}
var style=getStyle(elem);if(style.display=='none'){return getZeroSize();}
var size={};size.width=elem.offsetWidth;size.height=elem.offsetHeight;var isBorderBox=size.isBorderBox=style.boxSizing=='border-box';for(var i=0;i<measurementsLength;i++){var measurement=measurements[i];var value=style[measurement];var num=parseFloat(value);size[measurement]=!isNaN(num)?num:0;}
var paddingWidth=size.paddingLeft+size.paddingRight;var paddingHeight=size.paddingTop+size.paddingBottom;var marginWidth=size.marginLeft+size.marginRight;var marginHeight=size.marginTop+size.marginBottom;var borderWidth=size.borderLeftWidth+size.borderRightWidth;var borderHeight=size.borderTopWidth+size.borderBottomWidth;var isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter;var styleWidth=getStyleSize(style.width);if(styleWidth!==false){size.width=styleWidth+(isBorderBoxSizeOuter?0:paddingWidth+borderWidth);}
var styleHeight=getStyleSize(style.height);if(styleHeight!==false){size.height=styleHeight+(isBorderBoxSizeOuter?0:paddingHeight+borderHeight);}
size.innerWidth=size.width-(paddingWidth+borderWidth);size.innerHeight=size.height-(paddingHeight+borderHeight);size.outerWidth=size.width+marginWidth;size.outerHeight=size.height+marginHeight;return size;}
return getSize;});(function(window,factory){'use strict';if(true){!(__WEBPACK_LOCAL_MODULE_2__factory=(factory),(__WEBPACK_LOCAL_MODULE_2__module={id:"matches-selector/matches-selector",exports:{},loaded:false}),__WEBPACK_LOCAL_MODULE_2__=(typeof __WEBPACK_LOCAL_MODULE_2__factory==='function'?(__WEBPACK_LOCAL_MODULE_2__factory.call(__WEBPACK_LOCAL_MODULE_2__module.exports,__webpack_require__,__WEBPACK_LOCAL_MODULE_2__module.exports,__WEBPACK_LOCAL_MODULE_2__module)):__WEBPACK_LOCAL_MODULE_2__factory),(__WEBPACK_LOCAL_MODULE_2__module.loaded=true),__WEBPACK_LOCAL_MODULE_2__===undefined&&(__WEBPACK_LOCAL_MODULE_2__=__WEBPACK_LOCAL_MODULE_2__module.exports));}else{}})(window,function factory(){'use strict';var matchesMethod=function(){var ElemProto=Element.prototype;if(ElemProto.matches){return 'matches';}
if(ElemProto.matchesSelector){return 'matchesSelector';}
var prefixes=['webkit','moz','ms','o'];for(var i=0;i<prefixes.length;i++){var prefix=prefixes[i];var method=prefix+'MatchesSelector';if(ElemProto[method]){return method;}}}();return function matchesSelector(elem,selector){return elem[matchesMethod](selector);};});(function(window,factory){'use strict';if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__WEBPACK_LOCAL_MODULE_2__],__WEBPACK_LOCAL_MODULE_3__=((function(matchesSelector){return factory(window,matchesSelector);}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__)));}else{}})(window,function factory(window,matchesSelector){var utils={};utils.extend=function(a,b){for(var prop in b){a[prop]=b[prop];}
return a;};utils.modulo=function(num,div){return(num%div+div)%div;};utils.makeArray=function(obj){var ary=[];if(Array.isArray(obj)){ary=obj;}else if(obj&&typeof obj.length=='number'){for(var i=0;i<obj.length;i++){ary.push(obj[i]);}}else{ary.push(obj);}
return ary;};utils.removeFrom=function(ary,obj){var index=ary.indexOf(obj);if(index!=-1){ary.splice(index,1);}};utils.getParent=function(elem,selector){while(elem!=document.body){elem=elem.parentNode;if(matchesSelector(elem,selector)){return elem;}}};utils.getQueryElement=function(elem){if(typeof elem=='string'){return document.querySelector(elem);}
return elem;};utils.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};utils.filterFindElements=function(elems,selector){elems=utils.makeArray(elems);var ffElems=[];elems.forEach(function(elem){if(!(elem instanceof HTMLElement)){return;}
if(!selector){ffElems.push(elem);return;}
if(matchesSelector(elem,selector)){ffElems.push(elem);}
var childElems=elem.querySelectorAll(selector);for(var i=0;i<childElems.length;i++){ffElems.push(childElems[i]);}});return ffElems;};utils.debounceMethod=function(_class,methodName,threshold){var method=_class.prototype[methodName];var timeoutName=methodName+'Timeout';_class.prototype[methodName]=function(){var timeout=this[timeoutName];if(timeout){clearTimeout(timeout);}
var args=arguments;var _this=this;this[timeoutName]=setTimeout(function(){method.apply(_this,args);delete _this[timeoutName];},threshold||100);};};utils.docReady=function(callback){if(document.readyState=='complete'){callback();}else{document.addEventListener('DOMContentLoaded',callback);}};utils.toDashed=function(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+'-'+$2;}).toLowerCase();};var console=window.console;utils.htmlInit=function(WidgetClass,namespace){utils.docReady(function(){var dashedNamespace=utils.toDashed(namespace);var dataAttr='data-'+dashedNamespace;var dataAttrElems=document.querySelectorAll('['+dataAttr+']');var jsDashElems=document.querySelectorAll('.js-'+dashedNamespace);var elems=utils.makeArray(dataAttrElems).concat(utils.makeArray(jsDashElems));var dataOptionsAttr=dataAttr+'-options';var jQuery=window.jQuery;elems.forEach(function(elem){var attr=elem.getAttribute(dataAttr)||elem.getAttribute(dataOptionsAttr);var options;try{options=attr&&JSON.parse(attr);}catch(error){if(console){console.error('Error parsing '+dataAttr+' on '+elem.className+': '+error);}
return;}
var instance=new WidgetClass(elem,options);if(jQuery){jQuery.data(elem,namespace,instance);}});});};return utils;});(function(window,factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__WEBPACK_LOCAL_MODULE_0__,__WEBPACK_LOCAL_MODULE_1__],__WEBPACK_LOCAL_MODULE_4__=((function(EvEmitter,getSize){return factory(window,EvEmitter,getSize);}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__)));}else{}})(window,function factory(window,EvEmitter,getSize){'use strict';function isEmptyObj(obj){for(var prop in obj){return false;}
prop=null;return true;}
var docElemStyle=document.documentElement.style;var transitionProperty=typeof docElemStyle.transition=='string'?'transition':'WebkitTransition';var transformProperty=typeof docElemStyle.transform=='string'?'transform':'WebkitTransform';var transitionEndEvent={WebkitTransition:'webkitTransitionEnd',transition:'transitionend'}[transitionProperty];var vendorProperties=[transformProperty,transitionProperty,transitionProperty+'Duration',transitionProperty+'Property'];function Item(element,layout){if(!element){return;}
this.element=element;this.layout=layout;this.position={x:0,y:0};this._create();}
var proto=Item.prototype=Object.create(EvEmitter.prototype);proto.constructor=Item;proto._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:'absolute'});};proto.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};proto.getSize=function(){this.size=getSize(this.element);};proto.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop];}};proto.getPosition=function(){var style=getComputedStyle(this.element);var isOriginLeft=this.layout._getOption('originLeft');var isOriginTop=this.layout._getOption('originTop');var xValue=style[isOriginLeft?'left':'right'];var yValue=style[isOriginTop?'top':'bottom'];var layoutSize=this.layout.size;var x=xValue.indexOf('%')!=-1?parseFloat(xValue)/100*layoutSize.width:parseInt(xValue,10);var y=yValue.indexOf('%')!=-1?parseFloat(yValue)/100*layoutSize.height:parseInt(yValue,10);x=isNaN(x)?0:x;y=isNaN(y)?0:y;x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight;y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom;this.position.x=x;this.position.y=y;};proto.layoutPosition=function(){var layoutSize=this.layout.size;var style={};var isOriginLeft=this.layout._getOption('originLeft');var isOriginTop=this.layout._getOption('originTop');var xPadding=isOriginLeft?'paddingLeft':'paddingRight';var xProperty=isOriginLeft?'left':'right';var xResetProperty=isOriginLeft?'right':'left';var x=this.position.x+layoutSize[xPadding];style[xProperty]=this.getXValue(x);style[xResetProperty]='';var yPadding=isOriginTop?'paddingTop':'paddingBottom';var yProperty=isOriginTop?'top':'bottom';var yResetProperty=isOriginTop?'bottom':'top';var y=this.position.y+layoutSize[yPadding];style[yProperty]=this.getYValue(y);style[yResetProperty]='';this.css(style);this.emitEvent('layout',[this]);};proto.getXValue=function(x){var isHorizontal=this.layout._getOption('horizontal');return this.layout.options.percentPosition&&!isHorizontal?x/this.layout.size.width*100+'%':x+'px';};proto.getYValue=function(y){var isHorizontal=this.layout._getOption('horizontal');return this.layout.options.percentPosition&&isHorizontal?y/this.layout.size.height*100+'%':y+'px';};proto._transitionTo=function(x,y){this.getPosition();var curX=this.position.x;var curY=this.position.y;var compareX=parseInt(x,10);var compareY=parseInt(y,10);var didNotMove=compareX===this.position.x&&compareY===this.position.y;this.setPosition(x,y);if(didNotMove&&!this.isTransitioning){this.layoutPosition();return;}
var transX=x-curX;var transY=y-curY;var transitionStyle={};transitionStyle.transform=this.getTranslate(transX,transY);this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:true});};proto.getTranslate=function(x,y){var isOriginLeft=this.layout._getOption('originLeft');var isOriginTop=this.layout._getOption('originTop');x=isOriginLeft?x:-x;y=isOriginTop?y:-y;return 'translate3d('+x+'px, '+y+'px, 0)';};proto.goTo=function(x,y){this.setPosition(x,y);this.layoutPosition();};proto.moveTo=proto._transitionTo;proto.setPosition=function(x,y){this.position.x=parseInt(x,10);this.position.y=parseInt(y,10);};proto._nonTransition=function(args){this.css(args.to);if(args.isCleaning){this._removeStyles(args.to);}
for(var prop in args.onTransitionEnd){args.onTransitionEnd[prop].call(this);}};proto._transition=function(args){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(args);return;}
var _transition=this._transn;for(var prop in args.onTransitionEnd){_transition.onEnd[prop]=args.onTransitionEnd[prop];}
for(prop in args.to){_transition.ingProperties[prop]=true;if(args.isCleaning){_transition.clean[prop]=true;}}
if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null;}
this.enableTransition(args.to);this.css(args.to);this.isTransitioning=true;};function toDashedAll(str){return str.replace(/([A-Z])/g,function($1){return '-'+$1.toLowerCase();});}
var transitionProps='opacity,'+toDashedAll(vendorProperties.transform||'transform');proto.enableTransition=function(){if(this.isTransitioning){return;}
this.css({transitionProperty:transitionProps,transitionDuration:this.layout.options.transitionDuration});this.element.addEventListener(transitionEndEvent,this,false);};proto.transition=Item.prototype[transitionProperty?'_transition':'_nonTransition'];proto.onwebkitTransitionEnd=function(event){this.ontransitionend(event);};proto.onotransitionend=function(event){this.ontransitionend(event);};var dashedVendorProperties={'-webkit-transform':'transform'};proto.ontransitionend=function(event){if(event.target!==this.element){return;}
var _transition=this._transn;var propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;delete _transition.ingProperties[propertyName];if(isEmptyObj(_transition.ingProperties)){this.disableTransition();}
if(propertyName in _transition.clean){this.element.style[event.propertyName]='';delete _transition.clean[propertyName];}
if(propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];onTransitionEnd.call(this);delete _transition.onEnd[propertyName];}
this.emitEvent('transitionEnd',[this]);};proto.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(transitionEndEvent,this,false);this.isTransitioning=false;};proto._removeStyles=function(style){var cleanStyle={};for(var prop in style){cleanStyle[prop]='';}
this.css(cleanStyle);};var cleanTransitionStyle={transitionProperty:'',transitionDuration:''};proto.removeTransitionStyles=function(){this.css(cleanTransitionStyle);};proto.removeElem=function(){this.element.parentNode.removeChild(this.element);this.css({display:''});this.emitEvent('remove',[this]);};proto.remove=function(){if(!transitionProperty||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return;}
this.once('transitionEnd',function(){this.removeElem();});this.hide();};proto.reveal=function(){delete this.isHidden;this.css({display:''});var options=this.layout.options;var onTransitionEnd={};var transitionEndProperty=this.getHideRevealTransitionEndProperty('visibleStyle');onTransitionEnd[transitionEndProperty]=this.onRevealTransitionEnd;this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:true,onTransitionEnd:onTransitionEnd});};proto.onRevealTransitionEnd=function(){if(!this.isHidden){this.emitEvent('reveal');}};proto.getHideRevealTransitionEndProperty=function(styleProperty){var optionStyle=this.layout.options[styleProperty];if(optionStyle.opacity){return 'opacity';}
for(var prop in optionStyle){return prop;}};proto.hide=function(){this.isHidden=true;this.css({display:''});var options=this.layout.options;var onTransitionEnd={};var transitionEndProperty=this.getHideRevealTransitionEndProperty('hiddenStyle');onTransitionEnd[transitionEndProperty]=this.onHideTransitionEnd;this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:true,onTransitionEnd:onTransitionEnd});};proto.onHideTransitionEnd=function(){if(this.isHidden){this.css({display:'none'});this.emitEvent('hide');}};proto.destroy=function(){this.css({position:'',left:'',right:'',top:'',bottom:'',transition:'',transform:''});};return Item;});/*!
* Outlayer v2.0.0
* the brains and guts of a layout library
* MIT license
*/(function(window,factory){'use strict';if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__WEBPACK_LOCAL_MODULE_0__,__WEBPACK_LOCAL_MODULE_1__,__WEBPACK_LOCAL_MODULE_3__,__WEBPACK_LOCAL_MODULE_4__],__WEBPACK_LOCAL_MODULE_5__=((function(EvEmitter,getSize,utils,Item){return factory(window,EvEmitter,getSize,utils,Item);}).apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__)));}else{}})(window,function factory(window,EvEmitter,getSize,utils,Item){'use strict';var console=window.console;var jQuery=window.jQuery;var noop=function noop(){};var GUID=0;var instances={};function Outlayer(element,options){var queryElement=utils.getQueryElement(element);if(!queryElement){if(console){console.error('Bad element for '+this.constructor.namespace+': '+(queryElement||element));}
return;}
this.element=queryElement;if(jQuery){this.$element=jQuery(this.element);}
this.options=utils.extend({},this.constructor.defaults);this.option(options);var id=++GUID;this.element.outlayerGUID=id;instances[id]=this;this._create();var isInitLayout=this._getOption('initLayout');if(isInitLayout){this.layout();}}
Outlayer.namespace='outlayer';Outlayer.Item=Item;Outlayer.defaults={containerStyle:{position:'relative'},initLayout:true,originLeft:true,originTop:true,resize:true,resizeContainer:true,transitionDuration:'0.4s',hiddenStyle:{opacity:0,transform:'scale(0.001)'},visibleStyle:{opacity:1,transform:'scale(1)'}};var proto=Outlayer.prototype;utils.extend(proto,EvEmitter.prototype);proto.option=function(opts){utils.extend(this.options,opts);};proto._getOption=function(option){var oldOption=this.constructor.compatOptions[option];return oldOption&&this.options[oldOption]!==undefined?this.options[oldOption]:this.options[option];};Outlayer.compatOptions={initLayout:'isInitLayout',horizontal:'isHorizontal',layoutInstant:'isLayoutInstant',originLeft:'isOriginLeft',originTop:'isOriginTop',resize:'isResizeBound',resizeContainer:'isResizingContainer'};proto._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);utils.extend(this.element.style,this.options.containerStyle);var canBindResize=this._getOption('resize');if(canBindResize){this.bindResize();}};proto.reloadItems=function(){this.items=this._itemize(this.element.children);};proto._itemize=function(elems){var itemElems=this._filterFindItemElements(elems);var Item=this.constructor.Item;var items=[];for(var i=0;i<itemElems.length;i++){var elem=itemElems[i];var item=new Item(elem,this);items.push(item);}
return items;};proto._filterFindItemElements=function(elems){return utils.filterFindElements(elems,this.options.itemSelector);};proto.getItemElements=function(){return this.items.map(function(item){return item.element;});};proto.layout=function(){this._resetLayout();this._manageStamps();var layoutInstant=this._getOption('layoutInstant');var isInstant=layoutInstant!==undefined?layoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant);this._isLayoutInited=true;};proto._init=proto.layout;proto._resetLayout=function(){this.getSize();};proto.getSize=function(){this.size=getSize(this.element);};proto._getMeasurement=function(measurement,size){var option=this.options[measurement];var elem;if(!option){this[measurement]=0;}else{if(typeof option=='string'){elem=this.element.querySelector(option);}else if(option instanceof HTMLElement){elem=option;}
this[measurement]=elem?getSize(elem)[size]:option;}};proto.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items);this._layoutItems(items,isInstant);this._postLayout();};proto._getItemsForLayout=function(items){return items.filter(function(item){return!item.isIgnored;});};proto._layoutItems=function(items,isInstant){this._emitCompleteOnItems('layout',items);if(!items||!items.length){return;}
var queue=[];items.forEach(function(item){var position=this._getItemLayoutPosition(item);position.item=item;position.isInstant=isInstant||item.isLayoutInstant;queue.push(position);},this);this._processLayoutQueue(queue);};proto._getItemLayoutPosition=function(){return{x:0,y:0};};proto._processLayoutQueue=function(queue){queue.forEach(function(obj){this._positionItem(obj.item,obj.x,obj.y,obj.isInstant);},this);};proto._positionItem=function(item,x,y,isInstant){if(isInstant){item.goTo(x,y);}else{item.moveTo(x,y);}};proto._postLayout=function(){this.resizeContainer();};proto.resizeContainer=function(){var isResizingContainer=this._getOption('resizeContainer');if(!isResizingContainer){return;}
var size=this._getContainerSize();if(size){this._setContainerMeasure(size.width,true);this._setContainerMeasure(size.height,false);}};proto._getContainerSize=noop;proto._setContainerMeasure=function(measure,isWidth){if(measure===undefined){return;}
var elemSize=this.size;if(elemSize.isBorderBox){measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+elemSize.borderTopWidth+elemSize.borderBottomWidth;}
measure=Math.max(measure,0);this.element.style[isWidth?'width':'height']=measure+'px';};proto._emitCompleteOnItems=function(eventName,items){var _this=this;function onComplete(){_this.dispatchEvent(eventName+'Complete',null,[items]);}
var count=items.length;if(!items||!count){onComplete();return;}
var doneCount=0;function tick(){doneCount++;if(doneCount==count){onComplete();}}
items.forEach(function(item){item.once(eventName,tick);});};proto.dispatchEvent=function(type,event,args){var emitArgs=event?[event].concat(args):args;this.emitEvent(type,emitArgs);if(jQuery){this.$element=this.$element||jQuery(this.element);if(event){var $event=jQuery.Event(event);$event.type=type;this.$element.trigger($event,args);}else{this.$element.trigger(type,args);}}};proto.ignore=function(elem){var item=this.getItem(elem);if(item){item.isIgnored=true;}};proto.unignore=function(elem){var item=this.getItem(elem);if(item){delete item.isIgnored;}};proto.stamp=function(elems){elems=this._find(elems);if(!elems){return;}
this.stamps=this.stamps.concat(elems);elems.forEach(this.ignore,this);};proto.unstamp=function(elems){elems=this._find(elems);if(!elems){return;}
elems.forEach(function(elem){utils.removeFrom(this.stamps,elem);this.unignore(elem);},this);};proto._find=function(elems){if(!elems){return;}
if(typeof elems=='string'){elems=this.element.querySelectorAll(elems);}
elems=utils.makeArray(elems);return elems;};proto._manageStamps=function(){if(!this.stamps||!this.stamps.length){return;}
this._getBoundingRect();this.stamps.forEach(this._manageStamp,this);};proto._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect();var size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)};};proto._manageStamp=noop;proto._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect();var thisRect=this._boundingRect;var size=getSize(elem);var offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset;};proto.handleEvent=utils.handleEvent;proto.bindResize=function(){window.addEventListener('resize',this);this.isResizeBound=true;};proto.unbindResize=function(){window.removeEventListener('resize',this);this.isResizeBound=false;};proto.onresize=function(){this.resize();};utils.debounceMethod(Outlayer,'onresize',100);proto.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return;}
this.layout();};proto.needsResizeLayout=function(){var size=getSize(this.element);var hasSizes=this.size&&size;return hasSizes&&size.innerWidth!==this.size.innerWidth;};proto.addItems=function(elems){var items=this._itemize(elems);if(items.length){this.items=this.items.concat(items);}
return items;};proto.appended=function(elems){var items=this.addItems(elems);if(!items.length){return;}
this.layoutItems(items,true);this.reveal(items);};proto.prepended=function(elems){var items=this._itemize(elems);if(!items.length){return;}
var previousItems=this.items.slice(0);this.items=items.concat(previousItems);this._resetLayout();this._manageStamps();this.layoutItems(items,true);this.reveal(items);this.layoutItems(previousItems);};proto.reveal=function(items){this._emitCompleteOnItems('reveal',items);if(!items||!items.length){return;}
items.forEach(function(item){item.reveal();});};proto.hide=function(items){this._emitCompleteOnItems('hide',items);if(!items||!items.length){return;}
items.forEach(function(item){item.hide();});};proto.revealItemElements=function(elems){var items=this.getItems(elems);this.reveal(items);};proto.hideItemElements=function(elems){var items=this.getItems(elems);this.hide(items);};proto.getItem=function(elem){for(var i=0;i<this.items.length;i++){var item=this.items[i];if(item.element==elem){return item;}}};proto.getItems=function(elems){elems=utils.makeArray(elems);var items=[];elems.forEach(function(elem){var item=this.getItem(elem);if(item){items.push(item);}},this);return items;};proto.remove=function(elems){var removeItems=this.getItems(elems);this._emitCompleteOnItems('remove',removeItems);if(!removeItems||!removeItems.length){return;}
removeItems.forEach(function(item){item.remove();utils.removeFrom(this.items,item);},this);};proto.destroy=function(){var style=this.element.style;style.height='';style.position='';style.width='';this.items.forEach(function(item){item.destroy();});this.unbindResize();var id=this.element.outlayerGUID;delete instances[id];delete this.element.outlayerGUID;if(jQuery){jQuery.removeData(this.element,this.constructor.namespace);}};Outlayer.data=function(elem){elem=utils.getQueryElement(elem);var id=elem&&elem.outlayerGUID;return id&&instances[id];};Outlayer.create=function(namespace,options){var Layout=subclass(Outlayer);Layout.defaults=utils.extend({},Outlayer.defaults);utils.extend(Layout.defaults,options);Layout.compatOptions=utils.extend({},Outlayer.compatOptions);Layout.namespace=namespace;Layout.data=Outlayer.data;Layout.Item=subclass(Item);utils.htmlInit(Layout,namespace);if(jQuery&&jQuery.bridget){jQuery.bridget(namespace,Layout);}
return Layout;};function subclass(Parent){function SubClass(){Parent.apply(this,arguments);}
SubClass.prototype=Object.create(Parent.prototype);SubClass.prototype.constructor=SubClass;return SubClass;}
Outlayer.Item=Item;return Outlayer;});/*!
* Masonry v4.0.0
* Cascading grid layout library
* http://masonry.desandro.com
* MIT License
* by David DeSandro
*/(function(window,factory){if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[__WEBPACK_LOCAL_MODULE_5__,__WEBPACK_LOCAL_MODULE_1__],__WEBPACK_AMD_DEFINE_FACTORY__=(factory),__WEBPACK_AMD_DEFINE_RESULT__=(typeof __WEBPACK_AMD_DEFINE_FACTORY__==='function'?(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__)):__WEBPACK_AMD_DEFINE_FACTORY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__));}else{}})(window,function factory(Outlayer,getSize){var Masonry=Outlayer.create('masonry');Masonry.compatOptions.fitWidth='isFitWidth';Masonry.prototype._resetLayout=function(){this.getSize();this._getMeasurement('columnWidth','outerWidth');this._getMeasurement('gutter','outerWidth');this.measureColumns();this.colYs=[];for(var i=0;i<this.cols;i++){this.colYs.push(0);}
this.maxY=0;};Masonry.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var firstItem=this.items[0];var firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth;}
var columnWidth=this.columnWidth+=this.gutter;var containerWidth=this.containerWidth+this.gutter;var cols=containerWidth/columnWidth;var excess=columnWidth-containerWidth%columnWidth;var mathMethod=excess&&excess<1?'round':'floor';cols=Math[mathMethod](cols);this.cols=Math.max(cols,1);};Masonry.prototype.getContainerWidth=function(){var isFitWidth=this._getOption('fitWidth');var container=isFitWidth?this.element.parentNode:this.element;var size=getSize(container);this.containerWidth=size&&size.innerWidth;};Masonry.prototype._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth;var mathMethod=remainder&&remainder<1?'round':'ceil';var colSpan=Math[mathMethod](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);var colGroup=this._getColGroup(colSpan);var minimumY=Math.min.apply(Math,colGroup);var shortColIndex=colGroup.indexOf(minimumY);var position={x:this.columnWidth*shortColIndex,y:minimumY};var setHeight=minimumY+item.size.outerHeight;var setSpan=this.cols+1-colGroup.length;for(var i=0;i<setSpan;i++){this.colYs[shortColIndex+i]=setHeight;}
return position;};Masonry.prototype._getColGroup=function(colSpan){if(colSpan<2){return this.colYs;}
var colGroup=[];var groupCount=this.cols+1-colSpan;for(var i=0;i<groupCount;i++){var groupColYs=this.colYs.slice(i,i+colSpan);colGroup[i]=Math.max.apply(Math,groupColYs);}
return colGroup;};Masonry.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp);var offset=this._getElementOffset(stamp);var isOriginLeft=this._getOption('originLeft');var firstX=isOriginLeft?offset.left:offset.right;var lastX=firstX+stampSize.outerWidth;var firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1;lastCol=Math.min(this.cols-1,lastCol);var isOriginTop=this._getOption('originTop');var stampMaxY=(isOriginTop?offset.top:offset.bottom)+stampSize.outerHeight;for(var i=firstCol;i<=lastCol;i++){this.colYs[i]=Math.max(stampMaxY,this.colYs[i]);}};Masonry.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};if(this._getOption('fitWidth')){size.width=this._getContainerFitWidth();}
return size;};Masonry.prototype._getContainerFitWidth=function(){var unusedCols=0;var i=this.cols;while(--i){if(this.colYs[i]!==0){break;}
unusedCols++;}
return(this.cols-unusedCols)*this.columnWidth-this.gutter;};Masonry.prototype.needsResizeLayout=function(){var previousWidth=this.containerWidth;this.getContainerWidth();return previousWidth!=this.containerWidth;};return Masonry;});}),1142:(function(module,exports,__webpack_require__){__webpack_require__(1130);__webpack_require__(1119);__webpack_require__(382);$(function(){socialBaseModel=appModel.extend({baseDefaults:function baseDefaults(){var d={rawResponseTimestamp:-1,shuffling:false,followingData:[{type:'instagram',following:'sandervdborch',pageName:'sandervdborch',facebookFeedType:'feed',maxPosts:6}],approval:'off',dateFormat:'american',approvalData:{},shareable:false,charLimit:300,showText:true,refreshRate:86400,layoutStyle:'collage',imageCrop:'none',postSameHeight:false,columnWidth:'250px',gutter:'10',showFooter:true,specialFX:'none',postBackgroundColor:'#fff',postBorderColor:'#eee',postBorderRadius:'3px',postBorderWidth:'1px',backgroundShadow:'none',postFontColor:'#3B3B3B',postFontFamily:'Open Sans',postFontSize:'12px',postAlignment:'center',passwordProtectOn:false,postFooterFontColor:'#b3b3b3',postFooterFontFamily:'Open Sans',postFooterFontSize:'10px',postFooterBackgroundColor:'#fff',noFeedMessage:'No feed connected<br>Connect a Feed in the POWr Editor',customCSS:'',customJS:'',introAnimation:'none',linkBehavior:'_blank'};if(HOST=='wix'){try{var body_font=Wix.Styles.getSiteTextPresets()['Body-M'].fontFamily;d['postFontFamily']=body_font;d['postFooterFontFamily']=body_font;}catch(err){}
d['postBorderColorWix']='color-2';d['postFontColorWix']='color-4';d['postBackgroundColorWix']='color-1';d['postFooterFontColorWix']='color-5';d['postFooterBackgroundColorWix']='color-2';}
return d;},chameleonMapper:{postFontFamily:'text.fontFamily',postFontSize:'text.fontSize',postFontColor:'text.color',postBackgroundColor:'div.background'},afterInitialize:function afterInitialize(){this.setLocals({fetching:false,universalPosts:[],allUniversalPosts:{},rawResponse:[]});},afterMount:function afterMount(){var self=this;if(self.meta&&self.meta.premium_status&&self.attributes.refreshRate===86400){self.set({refreshRate:self.meta.premium_status});}},getDefaultFeedType:function getDefaultFeedType(){switch(this.meta.app_type){case 'tumblrFeed':return 'tumblr';case 'rssFeed':return 'rss';case 'flickrGallery':return 'flickr';case 'facebookFeed':return 'facebook';case 'vimeoGallery':return 'vimeo';case 'pinterestFeed':return 'pinterest';case 'instagramFeed':return 'instagram';case 'socialStream':return 'instagram';case 'youtubeGallery':return 'youtube';default:return 'instagram';}},isFeedNotConnected:function isFeedNotConnected(){var default_feeds=$.map(this.get('followingData'),function(val){return val.pageName;}).toString();var current_feeds=$.map(this.defaults().followingData,function(val){return val.pageName;}).toString();return!this.meta.demo_mode&&(this.get('followingData').length==0||default_feeds==current_feeds);},euroDate:function euroDate(date){var day=new Date(date*1000).getDate().toString();var month=(new Date(date*1000).getMonth()+1).toString();var year=new Date(date*1000).getFullYear().toString();if(day.length<2){day='0'+day;}
if(month.length<2){month='0'+month;}
return day+'.'+month+'.'+year;},getAll:function getAll(callback){var self=this;if(typeof GET_ALL_TIMER=='undefined'){var d=0;}else{var d=500;clearTimeout(GET_ALL_TIMER);}
window.GET_ALL_TIMER=setTimeout(function(){debug()('Get all called');$('.fetching').removeClass('hid');self.setLocals({fetching:true});var minUpdateTime=self.meta.premium_status=='free'?60:15;debug()('Min update time is '+minUpdateTime+'; Timestamp check is ',new Date().valueOf()/1000-self.get('rawResponseTimestamp')>minUpdateTime*60);var rawResponse=self.get('locals').rawResponse;var shouldUpdate=new Date().valueOf()/1000-self.get('rawResponseTimestamp')>minUpdateTime*60;if(shouldUpdate||rawResponse==undefined||rawResponse.length==0){window.GET_WAIT_TIME=500;self.getAllThroughServer(callback);}else{self.getAllThroughRawResponse(callback);}},d);},getAllThroughRawResponse:function getAllThroughRawResponse(callback){var self=this;debug()('gotten by parsing raw response');self.parseUniversal(callback);self.buildUniversalPosts();},getAllThroughServer:function getAllThroughServer(callback){debug()('getAllThroughServer called');var self=this;if(typeof GET_THROUGH_SERVER_TIMEOUT=='undefined'){var t=0;}else{var t=1000;clearTimeout(GET_THROUGH_SERVER_TIMEOUT);}
window.GET_THROUGH_SERVER_TIMEOUT=setTimeout(function(){var refreshStatus=self.get('refreshRate');var refreshRateValue=86400;if(HOST==='wix'){if(Date.parse(META.created_at)>Date.parse('Mon, 3 July 2017 14:30:00 -0700')){switch(refreshStatus){case 'free':refreshRateValue=86400;break;case 'premium':refreshRateValue=43200;break;case 'pro':refreshRateValue=10800;break;case 'enterprise':refreshRateValue=1200;break;default:refreshRateValue=86400;}}else{switch(refreshStatus){case 'free':refreshRateValue=86400;break;case 'premium':refreshRateValue=43200;break;case 'pro':refreshRateValue=3600;break;case 'enterprise':refreshRateValue=1200;break;default:refreshRateValue=86400;}}}else{switch(refreshStatus){case 'free':refreshRateValue=86400;break;case 'premium':refreshRateValue=43200;break;case 'pro':refreshRateValue=10800;break;case 'enterprise':refreshRateValue=1200;break;default:refreshRateValue=86400;}}
var following=self.get('followingData');for(var i=0;i<following.length;i++){if(following[i].facebookFeedType==='group_feed'){following[i].facebookFeedType='feed';}}
var options={url:cloudfrontNodeUri()+'/social-feed',type:'GET',data:{data:JSON.parse(JSON.stringify(self.get('followingData'))),premium:self.meta.premium_status,app_id:self.meta.id,refreshRate:refreshRateValue},errorsElement:$('.globalErrors')};ajaxController(options,function(r){if(r.success){if(r.done){self.set({rawResponseTimestamp:r.timestamp},{silent:true});self.setLocals({rawResponse:r.data});self.parseUniversal(callback);self.buildUniversalPosts();var following=self.get('followingData');for(var i=0;i<following.length;i++){following[i].dateFetched=new Date().valueOf()/1000;}
self.set('followingData',following);}else{if(typeof GET_WAIT_TIME=='undefined'){window.GET_WAIT_TIME=500;}else{GET_WAIT_TIME*=1.5;}
var waittime=GET_WAIT_TIME;var waits=Math.round(Math.log(waittime/500)/Math.log(1.1));var totalTime=-5.0*(1-Math.exp(0.09531*waits));debug()('waited: '+waits+' times for '+totalTime+' seconds total');setTimeout(function(){self.getAllThroughServer();},GET_WAIT_TIME);}}});},t);},parseUniversal:function parseUniversal(callback){var self=this;var data=self.get('locals').rawResponse;var oldAllPosts={};self.setLocals({fetching:false});$('.fetching').addClass('hid');for(var i=0;i<Object.keys(data).length;i++){var type=data[i].type;var name='';if(type=='twitter'){name='twitter|'+data[i].following;oldAllPosts[name]=self.parseTwitter(data[i].response);}else if(type=='facebook'){name='facebook|'+data[i].following;oldAllPosts[name]=self.parseFacebook(data[i].response);}else if(type=='instagram'){name='instagram|'+data[i].following;oldAllPosts[name]=self.parseInstagram(data[i].response);}else if(type=='tumblr'){name='tumblr|'+data[i].following;oldAllPosts[name]=self.parseTumblr(data[i].response);}else if(type=='rss'){name='rss|'+data[i].following;oldAllPosts[name]=self.parseRss(data[i].response);}else if(type=='pinterest'){name='pinterest|'+data[i].following;oldAllPosts[name]=self.parsePinterest(data[i].response);}else if(type=='flickr'){name='flickr|'+data[i].following;oldAllPosts[name]=self.parseFlickr(data[i].response);}else if(type=='youtube'){name='youtube|'+data[i].following;oldAllPosts[name]=self.parseYoutube(data[i].response);}else if(type=='vimeo'){name='vimeo|'+data[i].following;oldAllPosts[name]=self.parseVimeo(data[i].response);}else if(type=='dailymotion'){name='dailymotion|'+data[i].following;oldAllPosts[name]=self.parseDailymotion(data[i].response);}else{debug()('Error: unrecognized type - '+type);}
if(oldAllPosts[name]){for(var j=0;j<oldAllPosts[name].length;j++){var p=oldAllPosts[name][j];var cap=p.caption;cap=cap.replace(/<(?:(?!img)[^>]*>)/g,'');if(cap.length>self.get('charLimit')){var trimmedCap='';var opened=[];var realCharacters=0;var startOpen='';var partOfClosingTag=false;for(var k=0;k<cap.length;k++){if(startOpen==''&&!partOfClosingTag){if(cap[k]=='<'){if(cap[k+1]=='/'){partOfClosingTag=true;}else{startOpen=cap[k];}}else{realCharacters++;}}else if(partOfClosingTag){if(cap[k]=='>'){partOfClosingTag=false;opened.pop();}}else{if(cap[k]=='>'){if(cap[k-1]!='/'){startOpen+=cap[k];opened.push(startOpen);}
startOpen='';}else{startOpen+=cap[k];}}
trimmedCap+=cap[k];if(realCharacters>self.get('charLimit')){for(var l=opened.length-1;l>=0;l--){var op=opened[l];var m=op.match(/(<[^>^\s]*)/g);if(m!=null&&m.length>0){var close=m[0].substring(1,m[0].length);trimmedCap+='</'+close+'>';}}
break;}}
p.caption=trimmedCap+'...';oldAllPosts[name][j]=p;}}}
debug()('All old posts is NOW',oldAllPosts[name]);self.setLocals({allUniversalPosts:oldAllPosts});if(typeof self.setInputErrors!='undefined'&&data[i].following!=''){var hasPosts=oldAllPosts[type+'|'+data[i].following]!=null&&oldAllPosts[type+'|'+data[i].following].length>0;var errorText='';if(typeof data[i].errors=='string'){data[i].errors=JSON.parse(data[i].errors);}
debug()('Errors are :',data[i].errors);if(data[i].errors==undefined||data[i].errors.length==0){errorText='';if(!hasPosts){errorText='Nothing found for '+data[i].pageName;var expectation=self.checkExpectedType(data[i].pageName,data[i].type);if(expectation.different){errorText='Nothing found for '+data[i].pageName+". Perhaps it's a "+expectation.expected+' feed';}}}else if(data[i].errors.length==1){errorText=data[i].errors[0];}else{errorText='<ul><li>'+data[i].errors.join('</li><li>')+'</li></ul>';}
self.setInputErrors(null,errorText,function(el){return $(el).find('[name="following"]').filter(function(){var val=this.value.toLowerCase();val=val.substr(val.substr(0,1)=='@'?1:0);return val==data[i].following;})[0];});}else{}}
callback&&callback();},checkExpectedType:function checkExpectedType(name,currentType){var expected=currentType;if(!!name.match(/^https?:\/\/w?w?w?\.facebook\.com\/.+/)){expected='facebook';}else if(!!name.match(/^https?:\/\/w?w?w?\.twitter\.com\/.+/)){expected='twitter';}else if(!!name.match(/^https?:\/\/w?w?w?\.instagram\.com\/.+/)){expected='instagram';}else if(!!name.match(/^https?:\/\/w?w?w?\.tumblr\.com\/.+/)){expected='tumblr';}else if(!!name.match(/^https?:\/\/w?w?w?\.pinterest\.com\/.+/)){expected='pinterest';}else if(!!name.match(/^https?:\/\/w?w?w?\./)){expected='rss';}
return{expected:expected,different:expected!=currentType};},getFacebookAccessToken:function getFacebookAccessToken(callback){var self=this;var ts=self.get('locals').facebookAccessTokenTimestamp;if(ts!=null&&self.get('locals').facebookAccessToken!=null){var tsdate=new Date(ts.time*1000);var interval=new Date().getTime()-tsdate.getTime();interval/=1000*60;if(interval<15){debug()('Timestamp was too recent: '+interval+' minutes');return;}else{debug()('Long enough: '+interval+' minutes');}}},searchForFacebookPage:function searchForFacebookPage(searchTerm,inputEl,callback){},getInstagramUser:function getInstagramUser(searchTerm,callback){if(searchTerm.substr(0,1)=='#'){callback([{id:searchTerm}]);return;}
if(searchTerm.substr(0,1)=='@'){searchTerm=searchTerm.substr(1);}
var self=this;var is_url=!!searchTerm.match(/^https?:\/\/w?w?w?\.?instagram\.com\/[^\/]+/);if(is_url){searchTerm=searchTerm.split('.com/')[1];}
callback([{id:searchTerm}]);debug()('Searching for '+searchTerm);},parseFacebook:function parseFacebook(postList){var newPosts=[];var self=this;for(var i=0;i<postList.length;i++){var currentPost=postList[i];var caption=currentPost.message||currentPost.caption||currentPost.story||'';var link=currentPost.link||'';var fb_share_link=currentPost.link||'';var photos=[];if(postList[i].picture!=null&&postList[i].picture!=''){if(currentPost.realPic!=undefined){photos.push(currentPost.realPic);}else if(currentPost.object_id!=undefined){photos.push('//graph.facebook.com/'+currentPost.object_id+'/picture?type=normal');}else if(currentPost.picture!=undefined){var pic=currentPost.full_picture?currentPost.full_picture:currentPost.picture;if(/https?:\/\/fbexternal-a\.akamaihd\.net\/safe_image\.php\?d=[^&]+&w=130&h=130&url=http/.test(pic)){pic=pic.split('url=')[1].split('&')[0];pic=decodeURIComponent(pic).replace(/https?:/,'');}
if(pic){photos.push(pic);}}else{}}
var video={valid:false};if(postList[i].type=='video'){var idBit=postList[i].source.match(/youtube\.com\/((v\/[^?]*)|(watch\?v=[^&]*))/g);if(idBit&&idBit.length>0){idBit=idBit[0];video.videoProvider='youtube';video.valid=true;if(idBit.split('/v/').length>1){video.videoId=idBit.split('/v/')[1];}else if(idBit.split('?v=').length>1){video.videoId=idBit.split('?v=')[1];}}}
if(postList[i].type=='link'||!link){link='//facebook.com/'+postList[i].id;fb_share_link='https://www.facebook.com/'+postList[i].id;}
var pushing=true;if(caption.length>0){var string=escapeRegex(postList[i].from.name);var matches=caption.match(new RegExp(string+' (likes a) | (commented on) | (updated ((his|her|their cover photo)|(his|her|their own status)|(his|her|their own photo)|(created an event)))'));if(matches!=null&&matches.length>0){pushing=false;}}
if(pushing){if(typeof postList[i]!='undefined'){var userName='';var profilePicture='';if(typeof postList[i].from!='undefined'){userName=postList[i].from.name;profilePicture='//graph.facebook.com/'+postList[i].from.id+'/picture?type=square';}
newPosts.push({type:'Facebook',date:postList[i].created_time,username:userName,pictures:photos,video:video,caption:self.fixFacebookHashtags(self.fixUrls(caption||'')),originalLink:link,shareLink:fb_share_link,profilePicture:profilePicture,dateFetched:new Date().valueOf()/1000});}}}
return newPosts;},parseTwitter:function parseTwitter(postList){var newPosts=[];var self=this;for(var i=0;i<postList.length;i++){['entities_url','media_url','media_image','media_gif','media_video','retweet_media_image','retweet_media_gif','retweet_media_video'].map(function(el){if(postList[i][el]){postList[i][el]=postList[i][el].replace('http:','https:');}});newPosts.push({type:'Twitter',date:postList[i].post_date,username:postList[i].author,pictures:[],caption:self.fixTwitterHandlesAndHashtags(self.fixUrls(postList[i].full_text)),tweet_type:postList[i].tweet_type,retweet_text:postList[i].retweet_text,retweet_media_type:postList[i].retweet_media_type,retweet_media_video:postList[i].retweet_media_video,retweet_media_gif:postList[i].retweet_media_gif,retweet_media_image:postList[i].retweet_media_image,media_type:postList[i].media_type,media_video:postList[i].media_video,media_gif:postList[i].media_gif,media_image:postList[i].media_image,media_url:postList[i].media_url,originalLink:'//twitter.com/'+postList[i].author+'/status/'+postList[i].id,shareLink:'https://twitter.com/'+postList[i].author+'/status/'+postList[i].id,profilePicture:'//avatars.io/twitter/'+postList[i].author+'?size=large',dateFetched:new Date().valueOf()/1000});}
return newPosts;},parseInstagram:function parseInstagram(postList){var newPosts=[];var self=this;for(var i=0;i<postList.length;i++){if(postList[i].caption){var thing=postList[i].caption.text||'';}else{var thing='';}
newPosts.push({type:'Instagram',date:postList[i].created_time,username:postList[i].user.full_name,pictures:[postList[i].images.standard_resolution.url],caption:self.fixInstagramHandlesAndHashtags(self.fixUrls(thing)),originalLink:postList[i].link,shareLink:postList[i].link,profilePicture:postList[i].user.profile_picture,dateFetched:new Date().valueOf()/1000});}
return newPosts;},parseTumblr:function parseTumblr(postList){debug()('Tumblr post list is ',postList);var newPosts=[];var self=this;for(var i=0;i<postList.length;i++){var photos=[];for(var j=0;j<(postList[i].photos||[]).length;j++){var current_url=postList[i].photos[j].original_size.url;if(current_url.search('media.tumblr.com')>-1){current_url=current_url.replace('http:','https:');}
photos.push(current_url);}
var caption='';if(postList[i].title){caption+=postList[i].title+'  ';}
caption+=postList[i].caption||postList[i].body||'';if(photos.length>0||caption.length>0){var newPost={type:'Tumblr',date:postList[i].date,username:postList[i].blog_name,pictures:photos,caption:caption,originalLink:postList[i].post_url,shareLink:postList[i].post_url,profilePicture:'//api.tumblr.com/v2/blog/'+postList[i].blog_name+'.tumblr.com/avatar',dateFetched:new Date().valueOf()/1000};newPosts.push(newPost);}}
return newPosts;},parseRss:function parseRss(postList){var newPosts=[];var self=this;for(var i=0;i<postList.length;i++){var photos=[];var date=postList[i].published==undefined||postList[i].published==null?'':new Date(postList[i].published.replace(/-/g,'/')).valueOf()/1000;var caption='';if(postList[i].title){caption+='<div class="rssTitle">'+postList[i].title+' </div>';}
if(postList[i].summary){caption+=postList[i].summary;}
newPosts.push({type:'Rss',date:date,username:'',pictures:photos,caption:caption,originalLink:postList[i].url||'',shareLink:postList[i].url||'',profilePicture:'',dateFetched:new Date().valueOf()/1000});}
return newPosts;},parseFlickr:function parseFlickr(postList){var newPosts=[];var self=this;debug()('Flickr post list:',postList);for(var i=0;i<postList.length;i++){newPosts.push({type:'Flickr',date:postList[i].date,username:postList[i].username,pictures:postList[i].photos,caption:postList[i].caption,originalLink:postList[i].link,shareLink:postList[i].link,profilePicture:postList[i].profilePicture,dateFetched:new Date().valueOf()/1000});}
return newPosts;},parsePinterest:function parsePinterest(postList){var newPosts=[];var self=this;debug()('Pinterest post list:',postList);for(var i=0;i<postList.length;i++){newPosts.push({type:'Pinterest',date:postList[i].date,username:postList[i].username,pictures:postList[i].photos,caption:postList[i].caption,originalLink:postList[i].link,shareLink:postList[i].link,profilePicture:postList[i].profilePicture,dateFetched:new Date().valueOf()/1000});}
return newPosts;},parseYoutube:function parseYoutube(postList){var newPosts=[];var self=this;debug()('Youtube post list:',postList);for(var i=0;i<postList.length;i++){var video={};video.videoProvider='youtube';video.valid=true;video.videoId=postList[i].id;newPosts.push({type:'Youtube',video:video,date:postList[i].date,username:postList[i].username,pictures:[],caption:postList[i].caption,originalLink:postList[i].link,shareLink:postList[i].link,profilePicture:postList[i].profilePicture,dateFetched:new Date().valueOf()/1000});}
return newPosts;},parseVimeo:function parseVimeo(postList){var newPosts=[];var self=this;debug()('Vimeo post list:',postList);for(var i=0;i<postList.length;i++){var video={};video.videoProvider='vimeo';video.valid=true;video.videoId=postList[i].id;if(typeof postList[i].video_img!='undefined'){video.videoImgId=postList[i].video_img.split('/').pop();}
newPosts.push({type:'Vimeo',video:video,date:postList[i].date,username:postList[i].username,pictures:[],caption:postList[i].caption,originalLink:postList[i].link,shareLink:postList[i].link,profilePicture:postList[i].profilePicture,dateFetched:new Date().valueOf()/1000});}
return newPosts;},parseDailymotion:function parseDailymotion(postList){var newPosts=[];var self=this;debug()('Dailymotion post list:',postList);for(var i=0;i<postList.length;i++){var video={};video.videoProvider='dailymotion';video.valid=true;video.videoId=postList[i].id;newPosts.push({type:'Dailymotion',video:video,date:postList[i].date,username:postList[i].username,pictures:[],caption:postList[i].caption,originalLink:postList[i].link,shareLink:postList[i].link,profilePicture:postList[i].profilePicture,dateFetched:new Date().valueOf()/1000});}
return newPosts;},fixUrls:function fixUrls(txt){var urlPattern=/((\b((http[s]?|ftp|file):\/\/)|www)[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;txt=txt.replace(urlPattern,function(match){return ''+'<span class="twitterURL"><a href="'+urlFormat(match)+'" '+'target="_blank">'+match+'</a></span>';});return txt;},fixTwitterHandlesAndHashtags:function fixTwitterHandlesAndHashtags(txt){return txt;},fixFacebookHashtags:function fixFacebookHashtags(txt){var hashtagPattern=/[#]\w*[\s]?/g;txt=txt.replace(hashtagPattern,function(match){var beginsWithHashTag=match.substr(0,1)=='#';var fixedMatch=beginsWithHashTag?match.substr(1):match;return ' '+'<span class="facebookHashtag"><a href="//www.facebook.com/hashtag/'+fixedMatch+'"'+'target="_blank">'+match+''+'</a></span>';});return txt;},fixInstagramHandlesAndHashtags:function fixInstagramHandlesAndHashtags(txt){var instagramHandlePattern=/[@]\w*[\s]?/g;var hashtagPattern=/[#]\w*[\s]?/g;txt=txt.replace(instagramHandlePattern,function(match){var beginsWithHandle=match.substr(0,1)=='@';var fixedMatch=beginsWithHandle?match.substr(1):match;return ''+'<span class="instagramName"><a href="//instagram.com/'+fixedMatch+'"'+'target="_blank">'+match+''+'</a></span>';});return txt;},buildUniversalPosts:function buildUniversalPosts(){var self=this;var posts=[];var followingData=self.get('followingData');var maxPosts;var distributions={};var displayed={};var total=0;for(var i in followingData){if(followingData.hasOwnProperty(i)){var name=(followingData[i].type+'|'+followingData[i].following.substr(followingData[i].following.substr(0,1)=='@'?0:0)).toLowerCase();displayed[name]=(self.get('locals').allUniversalPosts[name]||self.get('locals').allUniversalPosts[name.replace(/%2B/i,'+')]||[]).filter(function(a){return self.get('showText')||a.pictures.length!=0||!!a.video;});if(displayed[name].length>0&&displayed[name][0].type!='Youtube'){displayed[name].sort(function(a,b){return b.date-a.date;});}
displayed[name].maxPosts=parseFloat(followingData[i].maxPosts);total+=parseFloat(maxPosts);}}
total=total||1;var totalPosts=0;var distributionsArr=[];for(var i in displayed){if(displayed.hasOwnProperty(i)){var dist=displayed[i].maxPosts;distributions[i]={value:dist,key:i,maxPosts:displayed[i].maxPosts};totalPosts+=dist;distributionsArr.push(distributions[i]);}}
distributionsArr.sort(function(a,b){return a.maxPosts-b.maxPosts;});if(distributionsArr.length==0){posts=[];}else{if(totalPosts>maxPosts){for(var i=0;i<totalPosts-maxPosts;i++){distributionsArr[i%distributionsArr.length].value=distributionsArr[i%distributionsArr.length].value-1;}}
if(totalPosts<maxPosts){distributionsArr.reverse();for(var i=0;i<maxPosts-totalPosts;i++){distributionsArr[i%distributionsArr.length].value=distributionsArr[i%distributionsArr.length].value+1;}}
for(var i=0;i<distributionsArr.length;i++){distributions[distributionsArr[i].key]=distributionsArr[i];}
for(var i in displayed){if(displayed.hasOwnProperty(i)){xdist=distributions;xdisp=displayed;posts=posts.concat(displayed[i].slice(0,distributions[i].value));}}}
posts.sort(function(a,b){return b.date-a.date;});self.setLocals({universalPosts:posts});self.triggerChange(false);return posts;},postHash:function postHash(universalPost){if(universalPost){return universalPost.type+'|'+universalPost.username+'|'+universalPost.originalLink+'|'+universalPost.date+'|'+((universalPost.pictures||[])[0]||'');}else{return '';}},checkApproved:function checkApproved(universalPost){var self=this;var result={approved:false,hash:self.postHash(universalPost)};switch(self.get('approval')){case 'off':result.approved=true;break;case 'defaultTrue':var existing=self.get('approvalData')[result.hash];if(typeof existing=='boolean'){result.approved=existing;}else{result.approved=true;}
break;case 'defaultFalse':var existing=self.get('approvalData')[result.hash];if(typeof existing=='boolean'){result.approved=existing;}else{result.approved=false;}
break;default:var existing=self.get('approvalData')[result.hash];result.approved=!!existing;}
return result;}});socialFeedAppModel=socialBaseModel;pinterestFeedAppModel=socialBaseModel;rssFeedAppModel=socialBaseModel;facebookFeedAppModel=socialBaseModel;tumblrFeedAppModel=socialBaseModel;instagramFeedAppModel=socialBaseModel;flickrGalleryAppModel=socialBaseModel;youtubeGalleryAppModel=socialBaseModel;vimeoGalleryAppModel=socialBaseModel;socialFeedAppSettings=appSettings.extend({afterInitialize:function afterInitialize(){var self=this;self.checkFacebookSearch();self.model.getFacebookAccessToken();self.$el.on('click','.approveAll',function(){self.setApproval(true);});self.$el.on('click','.unapproveAll',function(){self.setApproval(false);});self.$el.on('change reactUpdateRequest','[name=type]',function(){debug()('type changed');var pageNameEl=$(this).parents('.prototype-element').find('[name=pageName]');self.setPlaceholderByType(pageNameEl);self.setExtraByType(pageNameEl);pageNameEl.val('');});self.$el.on('change reactUpdateRequest','[name=layoutStyle]',function(){if($(this).val()=='grid'&&self.$el.find('[name=imageCrop]').val()=='none'){self.$el.find('[name=imageCrop]').val('square').trigger('forceUpdateComponent');}});self.$el.on('change reactUpdateRequest','[name="facebookFeedType"]',function(){self.model.getAllThroughServer(self.getAfterParsed());});self.model.setInputErrors=function(a,b,c){self.setInputErrors(a,b,c);};var doGet=function doGet(that,inInit){var parentEl=$(that).closest('.feeds');debug()('Parent el is ',parentEl);var type=parentEl.find('[name=type]').val();self.model.set({rawResponseTimestamp:0},{silent:true});var standardCheck=function standardCheck(checkFunction){var trueFollowing=checkFunction($(that).val());parentEl.find('[name=following]').val(trueFollowing);if(!inInit){self.setInputGetting($(that));}
self.update();};switch(type){case 'facebook':var fbPageId=$(that).parents('.prototype-element').find('[name=facebookPageId]').val();if(fbPageId){standardCheck(function(){return fbPageId;});}
break;case 'instagram':self.model.getInstagramUser($(that).val(),function(data){debug()('Instagram data:',data);if(data==null||data.length==0){self.setInputErrors($(that),'Unable to find user');}else{var correctId=data[0].id;if(!!data.trimmed){var usernameGuess=data.trimmed.toLowerCase();for(var i=0;i<data.length;i++){if(!!data[i].username&&data[i].username.toLowerCase()==usernameGuess){correctId=data[i].id;}}}
parentEl.find('[name=following]').val(correctId);self.setInputGetting($(that));self.update();}});break;case 'tumblr':standardCheck(self.checkTumblr);break;case 'twitter':standardCheck(self.checkTwitter);break;case 'pinterest':standardCheck(self.checkPinterest);break;case 'flickr':standardCheck(self.checkFlickr);break;case 'youtube':standardCheck(self.checkYoutube);break;case 'vimeo':standardCheck(self.checkVimeo);break;case 'dailymotion':standardCheck(self.checkDailymotion);break;case 'rss':standardCheck(self.checkRss);break;}};self.doGet=doGet;self.$el.find('[name=type]').each(function(){var pageNameEl=$(this).parents('.prototype-element').find('[name=pageName]');self.setPlaceholderByType(pageNameEl);self.setExtraByType(pageNameEl);if($(this).parents('.prototype-element').find('[name=following]').val()==''){debug()('Starting get for',pageNameEl.val());doGet(this,true);}});self.$el.on('keyup reactUpdateRequest','[name="pageName"]',function(){var that=this;if(typeof PAGE_NAME_TIMER!='undefined'){clearTimeout(PAGE_NAME_TIMER);}
window.PAGE_NAME_TIMER=setTimeout(function(){doGet(that);},500);});if(HOST=='wix'){self.model.getAll(self.getAfterParsed());}},afterRender:function afterRender(){var self=this;this.$el.find('[name="approval"]').val(this.model.get('approval'));var followingData=this.model.isFeedNotConnected()?[]:this.model.get('followingData');for(var i in followingData){var currentEl=this.$el.find('.feedsWrapper').addPrototype(null,{speed:'instant'});var current_followingData=followingData[i];if(current_followingData.pageName==null||current_followingData.pageName==''){current_followingData.pageName=current_followingData.following||'';}
currentEl.objectToForm(current_followingData);}
this.updateConditionals();this.initializeInputs();this.makeSortable('.prototype-wrapper','.sort',true);this.renderMediaBars();this.$el.find('.feeds.prototype-element:not(.prototype)').first().find('.panel-collapse').show();},initializeFacebookSearch:function initializeFacebookSearch(){var _this=this;Promise.all([__webpack_require__.e(82),__webpack_require__.e(72),__webpack_require__.e(99),__webpack_require__.e(89),__webpack_require__.e(95)]).then((function(require){var PowrFacebookPageSearch=__webpack_require__(2377).default;var self=_this;_this.initializePowrReactComponents({component:PowrFacebookPageSearch,propLinkedToRealInputVal:'value',handleChangeComplete:function handleChangeComplete($realInput,value){$realInput.val(value.value).trigger('reactUpdateRequest');$realInput.parents('.prototype-element').find('[name=pageName]').val(value.label).trigger('reactUpdateRequest');}});}).bind(null,__webpack_require__)).catch(__webpack_require__.oe);},getAfterParsed:function getAfterParsed(){var self=this;return function(){self.loadManagement();setTimeout(function(){self.loadManagement();},10);};},loadManagement:function loadManagement(){var self=this;var managedFeeds=self.$el.find('.managedFeeds:not(.prototype)');for(var i in this.model.get('locals').universalPosts){var currentEl=$(managedFeeds.get(i)||self.$el.find('.managedFeedsWrapper').addPrototype(null,{speed:'instant'}));var current_post=self.model.get('locals').universalPosts[i];if(current_post){var approvedData=self.model.checkApproved(current_post);currentEl.objectToForm(approvedData);currentEl.find('.feedAuthor').text(current_post.username);currentEl.find('.feedText').html(current_post.caption);if(current_post.pictures.length>0){currentEl.find('.feedImage').show().find('img').attr('src',current_post.pictures[0]);}else{currentEl.find('.feedImage').hide();}
var title=current_post.caption.substr(0,20)+'';if(title==''){title=current_post.username;}
if(title==''){title='Post';}
currentEl.find('.innerPanelTitle').text(title);}}
if(managedFeeds.length>this.model.get('locals').universalPosts.length){for(var i=this.model.get('locals').universalPosts.length;i<managedFeeds.length;i++){$(managedFeeds.get(i)).remove();}}
self.initializeCheckboxes();},afterUpdate:function afterUpdate(){var self=this;self.saveData();if(self.model.get('locals').render_style_only==true||self.model.isFeedNotConnected()){this.model.triggerChange();}else{self.model.getAll(self.getAfterParsed());self.updateConditionals();this.renderMediaBars();}},renderMediaBars:function renderMediaBars(){if(this.model.meta.premium_status=='enterprise'){$('.morePostsUpgradeMsg').hide();}
for(var i in this.model.get('followingData')){var currentData=this.model.get('followingData')[i];if(this.model.meta.premium_status=='pro'){if(currentData.type=='instagram'){$(this.$el.find('.morePostsUpgradeMsg')).hide();}else{$(this.$el.find('.morePostsUpgradeMsg')).show();}}
var currentEl=$(this.$el.find('.feeds.prototype-element:not(.prototype)')[i]);var title=currentData.pageName||currentData.type||'Feed';if(currentData.type=='vimeo'){var photoIcon='<i class="icon-'+currentData.type+' powrIcon"></i>';}else if(currentData.type=='dailymotion'){var photoIcon='d';}else{var fa_icon=currentData.type||'feed';var photoIcon='<i class="fa fa-'+fa_icon+'"></i>';}
currentEl.find('.mediaBar .title').html(truncate(title,'35'));var imageEl=currentEl.find('.mediaBar .image');imageEl.css({backgroundImage:'none'});imageEl.html(photoIcon);}},setApproval:function setApproval(on){var self=this;var approvalData=self.model.get('approvalData');Object.keys(approvalData).forEach(function(key){approvalData[key]=on;});self.model.set('approvalData',approvalData);self.loadManagement();self.model.triggerChange();},saveData:function saveData(){var followingData=[];this.$el.find('.feeds:not(.prototype)').each(function(){var current_followingData=$(this).formToObject();var feed_type=$(this).find("[name='type']").val();if(feed_type==='instagram'){current_followingData.maxPosts=$(this).find('.instagramSocial [name="maxPosts"]').val();}else{current_followingData.maxPosts=$(this).find('.allSocial [name="maxPosts"]').val();}
followingData.push(current_followingData);});var approval_data={};if(this.$el.find('.managedFeeds:not(.prototype)').length==0){approval_data=this.model.get('approvalData');}
this.$el.find('.managedFeeds:not(.prototype)').each(function(){var current_data=$(this).formToObject();debug()(current_data);approval_data[current_data.hash]=current_data.approved;});var toSave={followingData:followingData,approvalData:approval_data};this.model.set(toSave,{silent:true});},updateConditionals:function updateConditionals(){if(this.model.get('showFooter')){this.$el.find('.footerDetails').slideDown();}else{this.$el.find('.footerDetails').slideUp();}
if(this.model.get('approval')==='off'){this.$el.find('.showManagedFeeds').slideUp();}else{this.loadManagement();this.$el.find('.showManagedFeeds').slideDown();}
this.model.attributes.followingData.map(function(el,idx){var thisThing=$('.feeds:not(.prototype)')[idx];if(el.type!=='instagram'){$(thisThing).find('.allSocial').removeClass('hid');$(thisThing).find('.instagramSocial').addClass('hid');}else if(el.type==='instagram'){$(thisThing).find('.allSocial').addClass('hid');$(thisThing).find('.instagramSocial').removeClass('hid');}});if(this.$el.find('[name="layoutStyle"]:checked').val()=='grid'){this.$el.find('.layoutDetails').slideDown();}else{this.$el.find('.layoutDetails').hide();}},setInputGetting:function setInputGetting(inputEl){var self=this;var type=$(inputEl).closest('.feeds').find('[name=type]').val();if($(inputEl).val()==''){self.setInputErrors(inputEl,'');}else{self.setInputErrors(inputEl,'Getting '+$(inputEl).val()+' from '+type+'...');}},setInputErrors:function setInputErrors(inputEl,text,getInputFunction){debug()('Setting errors to ',text);if(!inputEl){inputEl=$(getInputFunction(this.$el));}
var errorsEl=inputEl.closest('.feeds').find('.followingErrors');errorsEl.html(text);if(text==''){errorsEl.slideUp();}else{errorsEl.slideDown();}},checkFacebookSearch:function checkFacebookSearch(){},checkDailymotion:function checkDailymotion(username){var is_url=!!username.match(/^https?:\/\/w?w?w?\.?dailymotion\.com\/[^\/]+/);if(is_url){username=username.split('.com/')[1].split('?')[0];}
username=username.replace(/\/$/,'');username=username.replace(/\s/g,'');return username;},checkFlickr:function checkFlickr(username){var is_url=!!username.match(/^https?:\/\/w?w?w?\.?flickr\.com\/[^\/]+/);if(is_url){username=username.split('.com/')[1].split('?')[0];}
username=username.replace(/\/$/,'');return username;},checkPinterest:function checkPinterest(username){var is_american_pinterest_url=!!username.match(/^https?:\/\/[a-z]*\.?pinterest\.com\/[^\/]+/);var is_foreign_pinterest_url=!!username.match(/^https?:\/\/[a-z]*\.?pinterest\.com+/);if(is_american_pinterest_url){username=username.split('.com/')[1].split('?')[0];}else if(is_foreign_pinterest_url){var pathNameRegex=/http[s]*:\/\/[^\/]+(\/.+)/;username=username.match(pathNameRegex)[1];username=username.substr(1);}else{var is_pinterest_url=!!username.match(/^https?:\/\/[a-z]*\.?pinterest\.+/);if(is_pinterest_url){var pathNameRegex=/http[s]*:\/\/[^\/]+(\/.+)/;username=username.match(pathNameRegex)[1];username=username.substr(1);}}
return username;},checkYoutube:function checkYoutube(username){var is_url=!!username.match(/^https?:\/\/w?w?w?\.?youtube\.com\/[^\/]+/);if(is_url){username=username.split('.com/')[1].replace('?','/');}
return username;},checkVimeo:function checkVimeo(username){var is_url=!!username.match(/^https?:\/\/w?w?w?\.?vimeo\.com\/[^\/]+/);if(is_url){username=username.split('.com/')[1].replace('?','/');}
return username;},checkTwitter:function checkTwitter(username){var is_url=!!username.match(/^https?:\/\/w?w?w?\.?twitter\.com\/[^\/]+/);if(is_url){username=username.split('.com/')[1].split('?')[0];}
var is_hashtag_url=!!username.match(/^hashtag\/[^\/]+/);if(is_hashtag_url){username='#'+username.split('hashtag/')[1].split('?')[0];}
if(username.substr(0,1)=='@'){username=username.substr(1,username.length-1);}
return username;},checkRss:function checkRss(url){return url;},checkTumblr:function checkTumblr(url){if(url.split('://').length>1){url=url.split('://')[1];}
if(url.substr(0,4)=='www.'){url=url.substr(4,url.length-4);}
if(url.substr(url.length-1,1)=='/'){url=url.substring(0,url.length-1);}
var parts=url.split(/\./g);var ending=parts[parts.length-1];var allowedEndings=['com','org','net','gov','io'];var allowed=false;for(var i=0;i<allowedEndings.length;i++){if(allowedEndings[i].toLowerCase()==ending){allowed=true;break;}}
if(!allowed){url=url+'.tumblr.com';}
debug()(url);return url;},buildPageSearchOptions:function buildPageSearchOptions(sResults,inputEl){var self=this;if(sResults&&sResults[0]&&sResults[0].success===false||_.isEmpty(sResults)){return;}
var tags=[];for(var i=0;i<sResults.length;i++){var pid=sResults[i].id;var text=sResults[i].name;if(sResults[i].category){text=text+' ('+sResults[i].category+')';}
tags.push({label:text,value:pid});}},afterAdd:function afterAdd(el){var self=this;if(el.is('.passwords')){return;}
var typeVal=this.model.getDefaultFeedType();var pageNameEl=this.$el.find('[name=pageName]');el.find('[name="type"]').val(typeVal).trigger('forceUpdateComponent');self.setExtraByType(pageNameEl,typeVal);self.setPlaceholderByType(pageNameEl,typeVal);if(typeVal==='facebook'){var default_social_data={facebookFeedType:'feed',maxPosts:6};}else{var default_social_data={maxPosts:6};}
el.objectToForm(default_social_data);this.initializeInputs();},initializeInputs:function initializeInputs(){this.updateInputFields();this.initializeFacebookSearch();},afterSetDesignPresets:function afterSetDesignPresets(){this.model.getAll(this.getAfterParsed());},setPlaceholderByType:function setPlaceholderByType(el,type){type=type||$(el).parents('.prototype-element').find('[name=type]').val();var labels={twitter:POWr.simpleCopies('enter_a_username_or_hashtag'),facebook:POWr.simpleCopies('page_name_or_url'),tumblr:POWr.simpleCopies('enter_a_tumblr_blog_name'),instagram:POWr.simpleCopies('enter_a_username_or_hashtag'),pinterest:POWr.simpleCopies('enter_a_pinterest_url_for_a_board'),flickr:POWr.simpleCopies('enter_a_flickr_url'),youtube:POWr.simpleCopies('enter_url_for_user_channel_or_playlist'),vimeo:POWr.simpleCopies('enter_a_vimeo_user_or_channel_url'),dailymotion:POWr.simpleCopies('enter_a_dailymotion_user'),rss:POWr.simpleCopies('enter_an_rss_url')};var placeholders={twitter:'@natgeo or #style',facebook:'https://',tumblr:'comedycentral',instagram:'@natgeo or #style',pinterest:'https://www.pinterest.com/group/board',flickr:'https://',youtube:'https://',vimeo:'https://',dailymotion:'redbull',rss:'https://'};if(HOST=='wix'){el.parents('.form-element').find('[wix-label]').attr('wix-label',labels[type]);}
el.data('label',labels[type]).data('placeholder',placeholders[type]).trigger('forceUpdateComponent');},setExtraByType:function setExtraByType(el,type){var parent=$(el).closest('.prototype-element');type=type||parent.find('[name=type]').val();if(type==='facebook'){parent.find('.facebookType').slideDown();parent.find('.extraFollowing').slideUp();}else{parent.find('.facebookType').slideUp();parent.find('.extraFollowing').slideDown();}}});socialFeedAppView=appView.extend({afterCorrectPassword:function afterCorrectPassword(){this.model.getAll();},afterInitialize:function afterInitialize(){var self=this;if(!self.model.get('passwordProtectOn')||self.model.get('locals').passwordProtectSuccess){self.model.getAll();}
this.$el.on('click','a',function(event){event.stopPropagation();return true;});this.$el.on('click','.postItem',function(e){if(self.model.meta.id==533636){return false;}
if($(e.target).hasClass('shareableicon')){return false;}
var link=$(this).data('link');var type=$(this).data('type');if((link||'')!=''){var link_behavior=self.model.get('linkBehavior')||'_blank';window.open(link,link_behavior);}});window.LAST_WIDTH=$(window).width();$(window).resize(function(){if(LAST_WIDTH!=$(window).width()){LAST_WIDTH=$(window).width();if(typeof RESIZE_TIMER!='undefined'){clearTimeout(RESIZE_TIMER);}
window.RESIZE_TIMER=setTimeout(function(){if(self.$el.width()<parseInt(self.model.get('columnWidth'))){self.render();}else{self.centerPosts();}},200);}});this.$el.on('css-change','.postItem',function(){self.layoutMasonry();});},layoutMasonry:function layoutMasonry(){var self=this;if(this.model.get('layoutStyle')=='grid'){this.turnOffCssWatch();if(this.model.get('postSameHeight')){this.$el.find('.postItem').css('height','auto');var tallest=0;this.$el.find('.postItem').each(function(){if($(this).height()>tallest){tallest=$(this).height();}});if(tallest>0){this.$el.find('.postItem').css('height',tallest);}}
this.turnOnCssWatch();}else{if(typeof MASONRY_TIMER=='undefined'){var t=500;}else{var t=500;clearTimeout(MASONRY_TIMER);}
window.MASONRY_TIMER=setTimeout(function(){self.$el.find('.posts').masonry('layout');},t);}},afterRender:function afterRender(){var self=this;var s=this.model.attributes;var el=this.$el;var colWidth=Math.min(parseInt(s.columnWidth),this.$el.width());var gutter=parseInt(s.gutter);this.model.setLocals({currentColumnWidth:colWidth,gutter:gutter});if(this.model.get('layoutStyle')!='grid'){this.$el.find('.posts').masonry({columnWidth:colWidth,itemSelector:'.postItem',gutter:gutter,transitionDuration:'0'});}
for(var i=0;i<s.locals.universalPosts.length;i++){if(self.model.checkApproved(s.locals.universalPosts[i]).approved){self.addElement(i);}}
self.addPowrMark();this.centerPosts();this.fixBrokenImages();if(this.model.isFeedNotConnected()){this.$el.find('.noFeedMessage').html(this.model.get('noFeedMessage'));this.$el.find('.veil').fadeIn();}else{this.$el.find('.veil').hide();}},fixBrokenImages:function fixBrokenImages(){this.$el.find('img').each(function(){var image=$(this);image.on('error',function(e){debug()('Error',e);var src=image.attr('src');if(src.search('pinimg')>-1&&!!src.match(/\.(jpg|jpeg)$/)){$(image).unbind('error').attr('src',src.replace(/\.(jpg|jpeg)$/,'.png'));}else if(window.location.protocol=='https:'){$(image).unbind('error').attr('src',src.replace(/^[^\/]*/,'http:'));}else if(!!src.match(/\.(jpg|jpeg)$/)){$(image).unbind('error').attr('src',src.replace(/\.(jpg|jpeg)$/,'.png'));}
var url=$(image).attr('src');$(image).closest('.postImgWrapper').css('backgroundImage','url('+url+')');});});},addElement:function addElement(i){var self=this;var template=$('#postElementTemplate').html();var post_html=_.template(template)({m:self.model.attributes,i:i,p:self.model.get('locals').universalPosts[i]});var post_el=$(post_html).appendTo('.posts');if(this.model.get('layoutStyle')!='grid'){self.$el.find('.posts').masonry('appended',post_el);}
var load_speed=self.model.get('locals').universalPosts.length>8?75:150;setTimeout(function(){post_el.addClass('faded');post_el.csswatch({props:'width, height, border-width'});},load_speed*i);},addPowrMark:function addPowrMark(){var post_html=this.$el.find('.powrPost').html();if(post_html!=undefined){var post_el=$(post_html).appendTo('.posts');if(this.model.get('layoutStyle')!='grid'){this.$el.find('.posts').masonry('appended',post_el);}
post_el.addClass('faded');}},centerPosts:function centerPosts(){var s=this.model.attributes;var col_width=this.model.get('locals').currentColumnWidth;var gutter=this.model.get('locals').gutter;var col_total_width=col_width+gutter;var feed_width=this.$el.find('.socialFeed').css({width:'auto'}).width();var number_of_columns=Math.floor(feed_width/col_total_width);var new_width=number_of_columns*col_total_width;if(new_width>0){this.$el.find('.socialFeed').width(new_width);}
this.layoutMasonry();}});__webpack_require__(1065);});function escapeRegex(text){return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,'\\$&');}
window.displayDate=function(epoch_in_milliseconds){try{return moment(new Date(epoch_in_milliseconds).toISOString()).format('MMMM D, YYYY');}catch(e){console.log('Error parsing date');return '';}};}),382:(function(module,exports,__webpack_require__){var require;var require;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f;}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e);},l,l.exports,e,t,n,r);}return n[o].exports;}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++){s(r[o]);}return s;})({1:[function(require,module,exports){module.exports=function arbitrator(callback,interval){return function(val){setTimeout(function(){callback(val);},interval);};};},{}],2:[function(require,module,exports){module.exports=function changeDate(date,units,_interval){var interval=_interval.slice(-1)==="s"?_interval.slice(0,-1):_interval;var ret=new Date(date);switch(interval.toLowerCase()){case "year":ret.setFullYear(ret.getFullYear()+units);break;case "quarter":ret.setMonth(ret.getMonth()+3*units);break;case "month":ret.setMonth(ret.getMonth()+units);break;case "week":ret.setDate(ret.getDate()+7*units);break;case "day":ret.setDate(ret.getDate()+units);break;case "hour":ret.setTime(ret.getTime()+units*36e5);break;case "minute":ret.setTime(ret.getTime()+units*6e4);break;case "second":ret.setTime(ret.getTime()+units*1e3);break;default:ret=new Date(NaN);break;}return ret;};},{}],3:[function(require,module,exports){window.moment_custom=require("./momentlte.js");window.moment=require("./momentlte.js");},{"./momentlte.js":6}],4:[function(require,module,exports){var ordinalSuffix=require("./ordinalSuffix.js");var offsetFix=require("./offsetFix.js");dateFormat.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]};function pad(val,len){val=String(val);len=len||2;while(val.length<len){val="0"+val;}return val;}function getWeek(date){var targetThursday=new Date(date.getFullYear(),date.getMonth(),date.getDate());targetThursday.setDate(targetThursday.getDate()-(targetThursday.getDay()+6)%7+3);var firstThursday=new Date(targetThursday.getFullYear(),0,4);firstThursday.setDate(firstThursday.getDate()-(firstThursday.getDay()+6)%7+3);var ds=targetThursday.getTimezoneOffset()-firstThursday.getTimezoneOffset();targetThursday.setHours(targetThursday.getHours()-ds);var weekDiff=(targetThursday-firstThursday)/(864e5*7);return 1+Math.floor(weekDiff);}function getDayOfWeek(date){var dow=date.getDay();if(dow===0){dow=7;}return dow;}function kindOf(val){if(val===null){return "null";}if(val===undefined){return "undefined";}if((typeof val==="undefined"?"undefined":_typeof(val))!=="object"){return typeof val==="undefined"?"undefined":_typeof(val);}if(Array.isArray(val)){return "array";}return{}.toString.call(val).slice(8,-1).toLowerCase();}function dateFormat(){var token=/([YyMmDdSsH]{1,4})|([h]){1,2}|([AaoZ])/g;var timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g;var timezoneClip=/[^-+\dA-Z]/g;return function(date,mask,localFlag,gmt){var _flags;var utc=!localFlag;if(arguments.length===1&&kindOf(date)==="string"&&!/\d/.test(date)){mask=date;date=undefined;}date=date||new Date();if(!(date instanceof Date)){date=new Date(date);}if(isNaN(date)){return new Date(date);}mask=String(dateFormat.masks[mask]||mask||dateFormat.masks["default"]);var _=utc?"getUTC":"get";var D=date[_+"Date"]();var d=date[_+"Day"]();var M=date[_+"Month"]();var Y=date[_+"FullYear"]();var H=date[_+"Hours"]();var m=date[_+"Minutes"]();var s=date[_+"Seconds"]();var L=date[_+"Milliseconds"]();var o=utc?0:date.getTimezoneOffset();var W=getWeek(date);var N=getDayOfWeek(date);var flags=(_flags={Q:"TO BE IMPLEMENTED",Qo:"TO BE IMPLEMENTED",Do:ordinalSuffix(D),D:D,DD:pad(D),DDD:"TO BE IMPLEMENTED",d:d,dd:pad(d),ddd:dateFormat.i18n.dayNames[D],dddd:dateFormat.i18n.dayNames[D]+"day",m:m,mm:pad(m),M:M+1,Mo:ordinalSuffix(M+1),MM:pad(M+1),MMM:dateFormat.i18n.monthNames[M].slice(0,3),MMMM:dateFormat.i18n.monthNames[M],YY:String(Y).slice(2),yy:String(Y).slice(2),yyyy:Y,YYYY:Y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H)},_defineProperty(_flags,"M",M),_defineProperty(_flags,"s",s),_defineProperty(_flags,"ss",pad(s)),_defineProperty(_flags,"l",pad(L,3)),_defineProperty(_flags,"L",pad(Math.round(L/10))),_defineProperty(_flags,"A",H<12?"AM":"PM"),_defineProperty(_flags,"a",H<12?"AM":"PM"),_defineProperty(_flags,"Z",o?offsetFix(o):"Z"),_defineProperty(_flags,"S",["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]),_defineProperty(_flags,"W",W),_defineProperty(_flags,"N",N),_flags);return mask.replace(token,function(match){if(match in flags){return flags[match];}return match.slice(1,match.length-1);});};}module.exports=dateFormat();},{"./offsetFix.js":7,"./ordinalSuffix.js":8}],5:[function(require,module,exports){var fromISOString=function(){var origParse=Date.parse,numericKeys=[1,4,5,6,7,10,11];return function(date){var timestamp,struct,minutesOffset=0;if(struct=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(date)){for(var i=0,k;k=numericKeys[i];++i){struct[k]=+struct[k]||0;}struct[2]=(+struct[2]||1)-1;struct[3]=+struct[3]||1;if(struct[8]!=="Z"&&struct[9]!==undefined){minutesOffset=struct[10]*60+struct[11];if(struct[9]==="+"){minutesOffset=0-minutesOffset;}}timestamp=Date.UTC(struct[1],struct[2],struct[3],struct[4],struct[5]+minutesOffset,struct[6],struct[7]);}else{console.warn("Bad date object passed",date);return new Date();}return new Date(timestamp);};}();module.exports=fromISOString;},{}],6:[function(require,module,exports){var dateFormatter=require("./format.js");var dateFromISO=require("./fromISOString.js");var Arbitrator=require("./arbitrator.js");var changeDate=require("./changeDate.js");var offsetFix=require("./offsetFix.js");var CONF={ISOFORMAT:"isoDateTime"};var isoFormat=function isoFormat(dateObj){function pad(number){if(number<10){return "0"+number;}return number;}var toISOString=function toISOString(){return this.getUTCFullYear()+"-"+pad(this.getUTCMonth()+1)+"-"+pad(this.getUTCDate())+"T"+pad(this.getUTCHours())+":"+pad(this.getUTCMinutes())+":"+pad(this.getUTCSeconds())+"Z";};return toISOString.call(dateObj);};TYPE={STRING:"STRING",DATE:"DATE",OBJECT:"OBJECT",MOMENT:"MOMENT",FUNCTION:"FUNCTION"};function typeDetect(object){var string=typeof object==="string"?TYPE.STRING:null;var DateObject=Object.prototype.toString.call(object)==="[object Date]"?TYPE.DATE:null;var object=(typeof object==="undefined"?"undefined":_typeof(object))==="object"?TYPE.OBJECT:null;var Moment=typeof object==="function"&&object._isAMomentObject?TYPE.MOMENT:null;var fxn=typeof object==="function"?TYPE.FUNCTION:null;return[string,DateObject,object,fxn].reduce(function(val,nextVal){return val?val:nextVal;});}function isPresent(thing){return thing!=null||!!thing;}var momentlte=function momentlte(dateObjOrString){var _date;var paramType=typeDetect(dateObjOrString);switch(paramType){case TYPE.STRING:_date=dateFromISO(dateObjOrString);break;case TYPE.DATE:_date=new Date(dateObjOrString);break;case TYPE.OBJECT:_date=new Date(dateObjOrString["year"],dateObjOrString["month"],dateObjOrString["date"],dateObjOrString["hours"],dateObjOrString["minutes"],dateObjOrString["seconds"],dateObjOrString["milliseconds"]);break;case TYPE.MOMENT:_date=new Date(dateObjOrString._d);break;case TYPE.NUMBER:throw "We dont support numbers.";break;default:_date=new Date();}var _response=function _response(val){var valType=typeDetect(val);if(valType===TYPE.DATE){_date=val;}else if(valType===TYPE.OBJECT){Object.keys(val).forEach(function(key,idx,keys){_response[key](val[key]);});return _response;}else{_date=new Date();}return _response;};_response._d=_date;_response._isAMomentObject=true;_response.every=function(numValue,_unit,callback){var arbitrator=Arbitrator(callback,numValue*1e3);return arbitrator;};_response.add=function(interval,unit){_date=changeDate(_date,interval,unit);_response._d=_date;return _response;};_response.minus=function(val,unit){return _response.add(-1*val,unit);};_response.toLocaleISOString=function(){var initial=dateFormatter(_date,"YYYY-MM-DDTHH:mm:ss",true);var offset=_date.getTimezoneOffset();var offsetString=offsetFix(offset);return initial+offsetString;};_response.toISOString=function(){return _response.format("yyyy-MM-DDTHH:mm:ssZ");};_response.format=function(formatStr,localFlag){return dateFormatter(_date,formatStr,localFlag);};_response.valueOf=function(){return+_date;};_response.get=_response.set=function(key,val){if(typeDetect(key)===TYPE.OBJECT){Object.keys(key).forEach(function(_key){_response.set(_key,key[_key]);});return _response;}else{return isPresent(val)?_response[key](val):_response[key]();}};_response.year=_response.years=function(val,localFlag){var valPresent=isPresent(val);var getOrSet=valPresent?"set":"get";var mode=localFlag?"":"UTC";var _method="FullYear";var method=getOrSet+mode+_method;if(valPresent){_date[method](val);return _response;}else{return _date[method]();}};_response.month=_response.months=function(val,localFlag){var valPresent=isPresent(val);var getOrSet=valPresent?"set":"get";var mode=localFlag?"":"UTC";var _method="Month";var method=getOrSet+mode+_method;if(valPresent){_date[method](val);return _response;}else{return _date[method]();}};_response.date=_response.dates=function(val,localFlag){var valPresent=isPresent(val);var getOrSet=valPresent?"set":"get";var mode=localFlag?"":"UTC";var _method="Date";var method=getOrSet+mode+_method;if(valPresent){_date[method](val);return _response;}else{return _date[method]();}};_response.hour=_response.hours=function(val,localFlag){var valPresent=isPresent(val);var getOrSet=valPresent?"set":"get";var mode=localFlag?"":"UTC";var _method="Hours";var method=getOrSet+mode+_method;if(valPresent){_date[method](val);return _response;}else{return _date[method]();}};_response.minute=_response.minutes=function(val,localFlag){var valPresent=isPresent(val);var getOrSet=valPresent?"set":"get";var mode=localFlag?"":"UTC";var _method="Minutes";var method=getOrSet+mode+_method;if(valPresent){_date[method](val);return _response;}else{return _date[method]();}};_response.second=_response.seconds=function(val,localFlag){var valPresent=isPresent(val);var getOrSet=valPresent?"set":"get";var mode=localFlag?"":"UTC";var _method="Seconds";var method=getOrSet+mode+_method;if(valPresent){_date[method](val);return _response;}else{return _date[method]();}};_response.millisecond=_response.milliseconds=function(val,localFlag){var valPresent=isPresent(val);var getOrSet=valPresent?"set":"get";var mode=localFlag?"":"UTC";var _method="Milliseconds";var method=getOrSet+mode+_method;if(valPresent){_date[method](val);return _response;}else{return _date[method]();}};_response.localYear=_response.localYears=function(){return _date.getFullYear();};_response.localMonth=_response.localMonths=function(){return _date.getMonth();};_response.localDate=_response.localDates=function(){return _date.getDate();};_response.localHour=_response.localHours=function(){return _date.getHours();};_response.localMinute=_response.localMinutes=function(){return _date.getMinutes();};_response.localSecond=_response.localSeconds=function(){return _date.getSeconds();};_response.localMillisecond=_response.localMilliseconds=function(){return _date.getMilliseconds();};return _response;};module.exports=momentlte;},{"./arbitrator.js":1,"./changeDate.js":2,"./format.js":4,"./fromISOString.js":5,"./offsetFix.js":7}],7:[function(require,module,exports){function offsetFix(numMinutes){var numMinutes=parseInt(numMinutes);if(!numMinutes)return "+00:00";function pad(number){var resp;var isNeg=number<0;var number=isNeg?number*-1:number;if(number<10){return "0"+number;}return number;}var isNeg=numMinutes<0;var numMinutes=isNeg?numMinutes*-1:numMinutes;var numHours=Math.floor(numMinutes/60);var remainMin=numMinutes%60;var numHoursString=pad(numHours);var remainMinString=pad(remainMin);var _resp=numHoursString+":"+remainMinString;return(isNeg?"+":"-")+_resp;}module.exports=offsetFix;},{}],8:[function(require,module,exports){module.exports=function getOrdinal(n){var s=["th","st","nd","rd"],v=n%100;return n+(s[(v-20)%10]||s[v]||s[0]);};},{}]},{},[3]);})});